<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>深入灵魂的热爱</title>
      <link href="/posts/3ffe3b5c/"/>
      <url>/posts/3ffe3b5c/</url>
      
        <content type="html"><![CDATA[<ul><li><strong>获“武汉城市职业学院《芷茗》文刊一等奖”奖项</strong></li><li><strong>代表“武汉城市职业学院足球协会”身份参赛</strong></li></ul><p><img src="https://qiniucdn.jamesy.cn/img/posts/3ffe3b5c_img_01.png"><br><img src="https://qiniucdn.jamesy.cn/img/posts/3ffe3b5c_img_02.png"><br><img src="https://qiniucdn.jamesy.cn/img/posts/3ffe3b5c_img_03.png"><br><img src="https://qiniucdn.jamesy.cn/img/posts/3ffe3b5c_img_04.png"><br><img src="https://qiniucdn.jamesy.cn/img/posts/3ffe3b5c_img_05.png"></p>]]></content>
      
      
      <categories>
          
          <category> 文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 原创 </tag>
            
            <tag> 足球 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>live2d看板娘自定义配置</title>
      <link href="/posts/a549bcc0/"/>
      <url>/posts/a549bcc0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>本文章部分内容转载自: <a href="">https://akilar.top/posts/5b8f515f/</a><br>插件作者原文: <a href="https://zhangshuqiao.org/2018-07/%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%AD%E6%B7%BB%E5%8A%A0Live2D%E7%9C%8B%E6%9D%BF%E5%A8%98/">在网页中添加 Live2D 看板娘</a></p></blockquote><p>看板娘太可爱辣，谁不想拥有一个可爱又伶俐的看板娘呢~</p><p>配置教程参考<a href="">https://akilar.top/posts/5b8f515f/</a> ,下面是我整理的一些配置方法</p><h2 id="Hexo插件版看板娘（不能换装）"><a href="#Hexo插件版看板娘（不能换装）" class="headerlink" title="Hexo插件版看板娘（不能换装）"></a>Hexo插件版看板娘（不能换装）</h2><details class="toggle" ><summary class="toggle-button" style="">点击查看方法</summary><div class="toggle-content"><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol><li><p>在Hexo根目录<code>[Blogroot]</code>下打开终端，输入以下指令安装必要插件。</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure></li><li><p>打开站点配置文件<code>[Blogroot]\config.yml</code><br>  搜索live2d,按照如下注释内容指示进行操作。<br>  如果没有搜到live2d的配置项，就直接把以下内容复制到最底部。</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Live2D</span></span><br><span class="line"><span class="comment">## https://github.com/EYHN/hexo-helper-live2d</span></span><br><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#开关插件版看板娘</span></span><br><span class="line">  <span class="attr">scriptFrom:</span> <span class="string">local</span> <span class="comment"># 默认</span></span><br><span class="line">  <span class="attr">pluginRootPath:</span> <span class="string">live2dw/</span> <span class="comment"># 插件在站点上的根目录(相对路径)</span></span><br><span class="line">  <span class="attr">pluginJsPath:</span> <span class="string">lib/</span> <span class="comment"># 脚本文件相对与插件根目录路径</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span> <span class="comment"># 模型文件相对与插件根目录路径</span></span><br><span class="line">  <span class="comment"># scriptFrom: jsdelivr # jsdelivr CDN</span></span><br><span class="line">  <span class="comment"># scriptFrom: unpkg # unpkg CDN</span></span><br><span class="line">  <span class="comment"># scriptFrom: https://npm.elemecdn.com/live2d-widget@3.x/lib/L2Dwidget.min.js # 你的自定义 url</span></span><br><span class="line">  <span class="attr">tagMode:</span> <span class="literal">false</span> <span class="comment"># 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中</span></span><br><span class="line">  <span class="attr">debug:</span> <span class="literal">false</span> <span class="comment"># 调试, 是否在控制台输出日志</span></span><br><span class="line">  <span class="attr">model:</span></span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-wanko</span> <span class="comment"># npm-module package name</span></span><br><span class="line">    <span class="comment"># use: wanko # 博客根目录/live2d_models/ 下的目录名</span></span><br><span class="line">    <span class="comment"># use: ./wives/wanko # 相对于博客根目录的路径</span></span><br><span class="line">    <span class="comment"># use: https://npm.elemecdn.com/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # 你的自定义 url</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">right</span> <span class="comment">#控制看板娘位置</span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">150</span> <span class="comment">#控制看板娘大小</span></span><br><span class="line">    <span class="attr">height:</span> <span class="number">300</span> <span class="comment">#控制看板娘大小</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">true</span> <span class="comment"># 手机中是否展示</span></span><br></pre></td></tr></table></figure></li><li><p>完成后保存修改，在Hexo根目录下运行指令</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>  之所以必须要使用hexo clean是因为我们需要清空缓存重新生成静态页面，不然看板娘没被加入生成的静态页面里，是不会出现的。</p></li></ol><h3 id="更换看板娘"><a href="#更换看板娘" class="headerlink" title="更换看板娘"></a>更换看板娘</h3><ol><li><p>同样是在Hexo根目录<code>[Blogroot]</code>下，打开终端，选择想要的看板娘进行安装，例如我这里用到的是 <code>live2d-widget-model-koharu</code>，一个Q版小正太。其他的模型也可以在<a href="https://huaji8.top/post/live2d-plugin-2.0/">模型预览</a>里查看以供选择。</p></li><li><p>输入指令</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save live2d-widget-model-koharu</span><br></pre></td></tr></table></figure></li><li><p>然后在站点配置文件<code>[Blogroot]\_config.yml</code>里找到<code>model</code>项修改为期望的模型。</p> <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">model:</span></span><br><span class="line"><span class="attr">use:</span> <span class="string">live2d-widget-model-koharu</span></span><br><span class="line"><span class="comment"># 默认为live2d-widget-model-wanko</span></span><br></pre></td></tr></table></figure></li><li><p>之后按部就班的运行</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>就能在<code>localhost:4000</code>上查看效果了。</p></li></ol><h3 id="卸载看板娘"><a href="#卸载看板娘" class="headerlink" title="卸载看板娘"></a>卸载看板娘</h3><p>卸载插件和卸载模型的指令都是通过npm进行操作的。在博客根目录<code>[Blogroot]</code>打开终端，输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-helper-live2d <span class="comment">#卸载看板娘插件</span></span><br><span class="line">npm uninstall live2d-widget-model-modelname <span class="comment">#卸载看板娘模型。记得替换modelname为看板娘名称</span></span><br></pre></td></tr></table></figure><p>卸载后为了保证配置项不出错，记得把<code>[Blogroot]\_config.yml</code>里的配置项给注释或者删除掉。</p></div></details><h2 id="大神魔改看板娘（会说话，能换装）"><a href="#大神魔改看板娘（会说话，能换装）" class="headerlink" title="大神魔改看板娘（会说话，能换装）"></a>大神魔改看板娘（会说话，能换装）</h2><details class="toggle" ><summary class="toggle-button" style="">点击查看方法</summary><div class="toggle-content"><p><strong>配置流程：</strong></p><ol><li><p>在 <code>[Blogroot]\themes\butterfly\source\</code> 目录下打开终端，输入</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/stevenjoezhang/live2d-widget.git live2d-widget</span><br></pre></td></tr></table></figure><blockquote><p>这行指令的意思就是 clone 这个项目到 source 路径下并重命名为 live2d-widget。<del>emm，貌似本来就叫 live2d-widget。反正算是一个踩坑点。</del>如果是用下载项目压缩包，解压后放到这里的，也记得把文件夹更名为live2d-widget。</p></blockquote></li><li><p>找到路径 <code>[Blogroot]\themes\butterfly\source\live2d-widget\autoload.js</code>，打开 <code>autoload.js</code>，修改内容：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-const live2d_path = &quot;https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/&quot;;</span></span><br><span class="line"><span class="addition">+const live2d_path = &quot;/live2d-widget/&quot;;</span></span><br></pre></td></tr></table></figure><blockquote><p>此处引用一下参考教程原话：autoload.js 中的注释的绝对地址指的是，将资源打包放到 [Blogroot]&#x2F;theme&#x2F;next&#x2F;source 中后，以 [Blogroot]&#x2F;theme&#x2F;next&#x2F;source 为根目录（&#x2F;）的绝对路径。</p></blockquote></li><li><p>在 <code>Butterfly</code> 的主题配置文件 <code>[Blogroot]\_config.butterfly.yml</code> 中，<br><code>butterfly</code> 主题其实自带 <code>fontawesome</code> 依赖，无需引入，</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment"># Inject</span></span><br><span class="line">    <span class="comment"># Insert the code to head (before &#x27;&lt;/head&gt;&#x27; tag) and the bottom (before &#x27;&lt;/body&gt;&#x27; tag)</span></span><br><span class="line">    <span class="comment"># 插入代码到头部 &lt;/head&gt; 之前 和 底部 &lt;/body&gt; 之前</span></span><br><span class="line">    <span class="attr">inject:</span></span><br><span class="line">      <span class="attr">head:</span></span><br><span class="line">        <span class="comment"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class="line">      <span class="attr">bottom:</span></span><br><span class="line">        <span class="comment"># - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">+</span>       <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer</span> <span class="string">src=&quot;/live2d-widget/autoload.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>保存所有文件的修改，然后照例执行</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>  就能在 <code>localhost:4000</code> 看到预览了。</p></li></ol></div></details><h2 id="本地化配置-（本站使用）"><a href="#本地化配置-（本站使用）" class="headerlink" title="本地化配置 （本站使用）"></a>本地化配置 （本站使用）</h2><ol><li><p>fork两个github仓库，<a href="">https://github.com/Akilarlxh/live2d_api</a> (或原作者的<a href="">https://github.com/fghrsh/live2d_api</a>) 和 <a href="">https://github.com/stevenjoezhang/live2d-widget</a><br> <strong>ps</strong>: <code>live2d-widget</code> 是看板娘主要的源文件，<code>live2d_api</code> 是看板娘的模型文件，可自定义添加模型<br> 本站使用的两个仓库地址为</p><ul><li>live2d-widget github: <a href="">https://github.com/JamesY-Jey/live2d-widget</a></li><li>live2d-widget cdn: <a href="">https://npm.elemecdn.com/jamesyao-live2dwidget/</a></li><li>live2d_api github: <a href="">https://github.com/JamesY-Jey/live2d_api</a></li><li>live2d_api cdn: <a href="">https://npm.elemecdn.com/jamesyao-live2dapi/</a></li></ul></li><li><p>修改<code>live2d_api</code>项目内的<code>~\live2d-widget\autoload.js</code>，修改<code>cdnPath</code>为自己fork的live2d_api仓库发包之后的cdn路径<br>这里cdn地址可根据需要加上<code>@latest</code>，如<code>https://npm.elemecdn.com/jamesyao-live2dapi@latest/</code></p></li></ol><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">  // 加载 waifu.css live2d.min.js waifu-tips.js</span><br><span class="line">  if (screen.width &gt;= 768) &#123;</span><br><span class="line">  Promise.all([</span><br><span class="line">  loadExternalResource(live2d_path + &quot;waifu.css&quot;, &quot;css&quot;),</span><br><span class="line">  loadExternalResource(live2d_path + &quot;live2d.min.js&quot;, &quot;js&quot;),</span><br><span class="line">  loadExternalResource(live2d_path + &quot;waifu-tips.js&quot;, &quot;js&quot;)</span><br><span class="line">  ]).then(() =&gt; &#123;</span><br><span class="line">  initWidget(&#123;</span><br><span class="line">  waifuPath: live2d_path + &quot;waifu-tips.json&quot;,</span><br><span class="line">  //apiPath: &quot;https://live2d.fghrsh.net/api/&quot;,</span><br><span class="line"><span class="deletion">-  cdnPath: &quot;https://cdn.jsdelivr.net/gh/fghrsh/live2d_api/&quot;</span></span><br><span class="line"><span class="addition">+  cdnPath: &quot;https://npm.elemecdn.com/jamesyao-live2dapi/&quot;</span></span><br><span class="line">//因为jsdelivr不支持50MB以上的包的加速，可能报403错误，所以用的vercel的CDN服务。</span><br><span class="line">//可以考虑clone我配置好的live2d_api仓库自己部署到其他更快的cdn服务上。</span><br><span class="line">  &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>fork的两个仓库都各自创建<code>autopublish.yml</code>编写构建配置</li></ol>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Node.js</span> <span class="string">Package</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">publish-npm:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="number">10</span></span><br><span class="line">          <span class="attr">registry-url:</span> <span class="string">https://registry.npmjs.org/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">publish</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">NODE_AUTH_TOKEN:</span> <span class="string">$&#123;&#123;secrets.npm_token&#125;&#125;</span></span><br></pre></td></tr></table></figure><ol start="4"><li><p>提交代码，自动触发构建任务并发布到 npm，如何发包参考<a href="https://blog.antmoe.com/posts/8c0d5ccc/">Github 之 Actions 自动发布 npm 包</a></p></li><li><p>主题配置引用刚刚发布的仓库里的<code>autoload.js</code>，如 <code>&lt;script defer src=&quot;https://npm.elemecdn.com/jamesyao-live2dwidget/autoload.js&quot;&gt;&lt;/script&gt;</code></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 精选 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Site </tag>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ios使用el-select的远程搜索无法唤起软键盘</title>
      <link href="/posts/d03ef575/"/>
      <url>/posts/d03ef575/</url>
      
        <content type="html"><![CDATA[<blockquote><p>参考文章: <a href="https://blog.csdn.net/Min_nna/article/details/125180495">ios移动端（手机、ipad）使用el-select的远程搜索无法唤起软键盘</a></p></blockquote><p>解决方案：去除下拉框的<code>readonly</code>属性即可</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;检测型号&quot;</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;testModel&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-select</span></span></span><br><span class="line"><span class="tag">    <span class="attr">filterable</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">&quot;select&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">blur.native.capture</span>=<span class="string">&quot;onblur&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">hook:mounted</span>=<span class="string">&quot;cancalReadOnly&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">visible-change</span>=<span class="string">&quot;cancalReadOnly&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:popper-append-to-body</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-model</span>=<span class="string">&quot;ruleForm.testModel&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">placeholder</span>=<span class="string">&quot;请选择型号&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-option</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in testModelArr&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:label</span>=<span class="string">&quot;item.model_name&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:value</span>=<span class="string">&quot;item.model_name&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="comment">// 失去焦点</span></span><br><span class="line">  <span class="title function_">onblur</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="regexp">/(iPhone|iPad|iPod|iOS)/i</span>.<span class="title function_">test</span>(navigator.<span class="property">userAgent</span>))&#123; <span class="comment">//判断iPhone|iPad|iPod|iOS</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">select</span>.<span class="title function_">blur</span>()</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> scrollHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> ||<span class="number">0</span>;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>,<span class="title class_">Math</span>.<span class="title function_">max</span>(scrollHeight - <span class="number">1</span>,<span class="number">0</span>))</span><br><span class="line">    &#125;, <span class="number">100</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 取消只读</span></span><br><span class="line">  <span class="title function_">cancalReadOnly</span>(<span class="params">onOff</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(!onOff)&#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; select &#125; = <span class="variable language_">this</span>.<span class="property">$refs</span>;</span><br><span class="line">        <span class="keyword">const</span> input = select.<span class="property">$el</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.el-input__inner&#x27;</span>)</span><br><span class="line">        input.<span class="title function_">removeAttribute</span>(<span class="string">&#x27;readonly&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>Vue3</code>中通过watch函数代替<code>Vue2</code>中的<code>@hooks:mounted</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> selectref = <span class="title function_">ref</span>(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> selectref.<span class="property">value</span>, <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (val) &#123;</span><br><span class="line">    <span class="title function_">cancalReadOnly</span>(<span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Bug </tag>
            
            <tag> ElementUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用IntersectionObserver处理视频滚动到可视窗口内时自动播放</title>
      <link href="/posts/42ca05b8/"/>
      <url>/posts/42ca05b8/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Intersection_Observer_API">IntersectionObserver</a></p></blockquote><ul><li>Web中使用</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> query = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#video&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">rootMargin</span>: <span class="string">&#x27;0px&#x27;</span>,</span><br><span class="line">  <span class="attr">threshold</span>: <span class="number">0.5</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> observer = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(<span class="keyword">function</span>(<span class="params">entries, observer</span>) &#123;</span><br><span class="line">  <span class="comment">// isIntersecting返回true代表在页面可视区域，false代表不在页面可视区域</span></span><br><span class="line">  <span class="keyword">const</span> isIntersecting = entries[<span class="number">0</span>].<span class="property">isIntersecting</span>;</span><br><span class="line">  <span class="keyword">if</span>(isIntersecting) &#123;</span><br><span class="line">    query.<span class="title function_">play</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, options);</span><br><span class="line"></span><br><span class="line">observer.<span class="title function_">observe</span>(query);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止对一个元素的观察</span></span><br><span class="line"><span class="comment">// if(observer)&#123;</span></span><br><span class="line"><span class="comment">//   observer.unobserve(query)</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><ul><li><code>Vue3</code>中需要在生命周期中获取元素和监听事件</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> query = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">rootMargin</span>: <span class="string">&#x27;0px&#x27;</span>,</span><br><span class="line">  <span class="attr">threshold</span>: <span class="number">0.5</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> observer = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(<span class="keyword">function</span>(<span class="params">entries, observer</span>) &#123;</span><br><span class="line">  <span class="comment">// isIntersecting返回true代表在页面可视区域，false代表不在页面可视区域</span></span><br><span class="line">  <span class="keyword">const</span> isIntersecting = entries[<span class="number">0</span>].<span class="property">isIntersecting</span>;</span><br><span class="line">  <span class="keyword">if</span>(isIntersecting) &#123;</span><br><span class="line">    query.<span class="title function_">play</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, options);</span><br><span class="line"></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  query = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#video&#x27;</span>);</span><br><span class="line">  observer.<span class="title function_">observe</span>(query);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">onBeforeUnmount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(observer)&#123;</span><br><span class="line">    observer.<span class="title function_">unobserve</span>(query) <span class="comment">// 停止对一个元素的观察</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> H5 </tag>
            
            <tag> Video </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rem响应式适配(postCssPxToRem + flexible.js)</title>
      <link href="/posts/b53af720/"/>
      <url>/posts/b53af720/</url>
      
        <content type="html"><![CDATA[<p>在开发中经常会遇到响应式适配的问题，常用的就是通过 <code>rem</code> 单位来适配。这里介绍通过使用 <strong><code>postCssPxToRem + flexible.js</code></strong> 进行rem响应式适配。<br>移动端也可使用此方案，或使用 <a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/rem.js">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/rem.js</a> 的代码。</p><blockquote><p>参考文章：<br><a href="http://t.csdn.cn/1qaLG">vue3+vite+ts项目搭建-postcss-pxtorem</a><br><a href="http://t.csdn.cn/bbnTu">vue3.0+vite 使用 postcss-pxtorem 实现移动自适应（px转rem）</a></p></blockquote><blockquote><p>这里的环境是 Vite + Vue3</p></blockquote><h2 id="1-安装-postCssPxToRem"><a href="#1-安装-postCssPxToRem" class="headerlink" title="1. 安装 postCssPxToRem"></a>1. 安装 postCssPxToRem</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i postcss-pxtorem -D</span><br></pre></td></tr></table></figure><h2 id="2-配置"><a href="#2-配置" class="headerlink" title="2. 配置"></a>2. 配置</h2><ul><li>新建 <code>postcss.config.js</code> 文件</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: &#123;</span><br><span class="line">    <span class="attr">autoprefixer</span>: &#123;</span><br><span class="line">      <span class="attr">overrideBrowserslist</span>: [</span><br><span class="line">        <span class="string">&#x27;Android 4.1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;iOS 7.1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Chrome &gt; 31&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;not ie &lt;= 11&#x27;</span>, <span class="comment">//不考虑IE浏览器</span></span><br><span class="line">        <span class="string">&#x27;ff &gt;= 30&#x27;</span>, <span class="comment">//仅新版本用“ff&gt;=30</span></span><br><span class="line">        <span class="string">&#x27;&gt; 1%&#x27;</span>, <span class="comment">//  全球统计有超过1%的使用率使用“&gt;1%”;</span></span><br><span class="line">        <span class="string">&#x27;last 2 versions&#x27;</span> <span class="comment">// 所有主流浏览器最近2个版本</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">grid</span>: <span class="literal">true</span> <span class="comment">// 开启grid布局的兼容(浏览器IE除外其他都能兼容grid，可以关闭开启)</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;postcss-pxtorem&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">rootValue</span>: <span class="number">192</span>, <span class="comment">// 设计稿宽度除以 10，  开头大写的Px 不转换 =&gt; height: 100Px, 内联样式不转换，需要 / 75 转成 rem</span></span><br><span class="line">      <span class="attr">unitPrecision</span>: <span class="number">6</span>, <span class="comment">// 计算结果保留 6 位小数</span></span><br><span class="line">      <span class="attr">selectorBlackList</span>: [<span class="string">&#x27;.no-rem&#x27;</span>, <span class="string">&#x27;no-rem&#x27;</span>], <span class="comment">// 要忽略的选择器并保留为px。</span></span><br><span class="line">      <span class="attr">propList</span>: [<span class="string">&#x27;*&#x27;</span>], <span class="comment">// 可以从px更改为rem的属性  感叹号开头的不转换</span></span><br><span class="line">      <span class="attr">replace</span>: <span class="literal">true</span>, <span class="comment">// 转换成 rem 以后，不保留原来的 px 单位属性</span></span><br><span class="line">      <span class="attr">mediaQuery</span>: <span class="literal">true</span>, <span class="comment">// 允许在媒体查询中转换px。</span></span><br><span class="line">      <span class="attr">minPixelValue</span>: <span class="number">2</span>, <span class="comment">// 设置要替换的最小像素值。</span></span><br><span class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/i</span> <span class="comment">// 排除 node_modules 文件(node_modules 内文件禁止转换)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Vite环境中不生效可在 <code>vite.config.js</code> 中添加配置</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> postCssPxToRem <span class="keyword">from</span> <span class="string">&#x27;postcss-pxtorem&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置项中添加</span></span><br><span class="line"><span class="attr">css</span>: &#123;</span><br><span class="line">  <span class="attr">postcss</span>: &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">      <span class="title function_">postCssPxToRem</span>(&#123;</span><br><span class="line">        <span class="attr">rootValue</span>: <span class="number">192</span>, <span class="comment">// 设计稿宽度除以 10，  开头大写的Px 不转换 =&gt; height: 100Px, 内联样式不转换，需要 / 75 转成 rem</span></span><br><span class="line">        <span class="attr">unitPrecision</span>: <span class="number">6</span>, <span class="comment">// 计算结果保留 6 位小数</span></span><br><span class="line">        <span class="attr">selectorBlackList</span>: [<span class="string">&#x27;.no-rem&#x27;</span>, <span class="string">&#x27;no-rem&#x27;</span>], <span class="comment">// 要忽略的选择器并保留为px。</span></span><br><span class="line">        <span class="attr">propList</span>: [<span class="string">&#x27;*&#x27;</span>], <span class="comment">// 可以从px更改为rem的属性  感叹号开头的不转换</span></span><br><span class="line">        <span class="attr">replace</span>: <span class="literal">true</span>, <span class="comment">// 转换成 rem 以后，不保留原来的 px 单位属性</span></span><br><span class="line">        <span class="attr">mediaQuery</span>: <span class="literal">false</span>, <span class="comment">// 允许在媒体查询中转换px。</span></span><br><span class="line">        <span class="attr">minPixelValue</span>: <span class="number">2</span>, <span class="comment">// 设置要替换的最小像素值。</span></span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/i</span> <span class="comment">// 排除 node_modules 文件(node_modules 内文件禁止转换)</span></span><br><span class="line">      &#125;),</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-引入-flexible-js"><a href="#3-引入-flexible-js" class="headerlink" title="3. 引入 flexible.js"></a>3. 引入 flexible.js</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i lib-flexible -D</span><br></pre></td></tr></table></figure><ul><li><code>main.js</code> 中引入</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;lib-flexible/flexible&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>如果要自定义适配范围使用 <a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/flexible.js">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/flexible.js</a> 中的代码，修改 <code>refreshRem</code> 函数的判断条件就可以了</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> 适配 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>H5无法播放音频的问题</title>
      <link href="/posts/51f9d577/"/>
      <url>/posts/51f9d577/</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://www.jianshu.com/p/caf9f159cf87">Chrome 声音自动播放抱错问题【play() failed】</a></p><p>由于移动端浏览器一般是禁止音视频自动播放，所以会出现很多不能直接实现的问题。</p><p>本次的问题为：在ios端的浏览器中（Safari或微信内置浏览器），出现音频播放报错问题<br><code>Object &#123;name: &quot;NotAllowedError&quot;, message: &quot;... message: &quot;The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.&quot;</code></p><p>报错原因：用户还没有交互，不允许调用<code>AudioContext</code>，但实际是把调用函数写在了交互后的某个异步或定时器中，所以会出现相同的错误。</p><p>解决办法：在交互的函数中先播放并暂停一遍音频，在下文继续处理原有的逻辑正常播放音频</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Audio</span> = $(<span class="string">`#audio`</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">let</span> playPromise = <span class="title class_">Audio</span>.<span class="title function_">play</span>();</span><br><span class="line"><span class="keyword">if</span> (playPromise) &#123;</span><br><span class="line">  playPromise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 音频加载成功</span></span><br><span class="line">    <span class="title class_">Audio</span>.<span class="title function_">pause</span>();</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 音频加载失败</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;音频加载失败&#x27;</span>, e);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><p>长按保存图片的问题</p></li><li><p>htmltocanvas ios15文字不显示</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> H5 </tag>
            
            <tag> Bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>宝塔面板nginx开启浏览目录功能（autoindex on）</title>
      <link href="/posts/80ae9ca4/"/>
      <url>/posts/80ae9ca4/</url>
      
        <content type="html"><![CDATA[<h2 id="如何在宝塔面板使用nginx的浏览目录功能？"><a href="#如何在宝塔面板使用nginx的浏览目录功能？" class="headerlink" title="如何在宝塔面板使用nginx的浏览目录功能？"></a>如何在宝塔面板使用nginx的浏览目录功能？</h2><blockquote><p>原文：<a href="https://www.zuantouxc.cn/archives/789">https://www.zuantouxc.cn/archives/789</a></p></blockquote><ol><li>添加站点，php版本选择纯静态</li><li>在网站根目录下创建一个文件夹，然后【伪静态】添加以下内容即可</li></ol><blockquote><p>如: 创建的文件夹名为download，需要浏览download文件夹里面的目录，则在伪静态中添加</p></blockquote>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">location /</span><br><span class="line">&#123;</span><br><span class="line">    root /根目录/download;</span><br><span class="line">    autoindex on;</span><br><span class="line">    autoindex_format html;</span><br><span class="line">    autoindex_exact_size off;</span><br><span class="line">    autoindex_localtime on;</span><br><span class="line">    charset utf-8,gbk;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note danger flat"><p>注意：创建的目录下不要放index.html，否则会配置失效！</p></div><h2 id="示例1"><a href="#示例1" class="headerlink" title="示例1"></a>示例1</h2><p>  <img src="https://www.zuantouxc.cn/wp-content/uploads/2021/01/image.png"><br>  <img src="https://www.zuantouxc.cn/wp-content/uploads/2021/01/image-2-1024x678.png"></p><h2 id="示例2"><a href="#示例2" class="headerlink" title="示例2"></a>示例2</h2><blockquote><p>这里以我自己的网站为例<br>访问域名为：xxx.jamesy.cn<br>站点根目录为：&#x2F;home&#x2F;wwwroot&#x2F;www<br>想要浏览此站点根目录的所有内容</p></blockquote><p>  首先在站点配置中设置php版本为<code>伪静态</code>，然后在【伪静态】配置中写入<br>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">location /</span><br><span class="line">&#123;</span><br><span class="line">    root /home/wwwroot/www;</span><br><span class="line">    autoindex on;</span><br><span class="line">    autoindex_format html;</span><br><span class="line">    autoindex_exact_size off;</span><br><span class="line">    autoindex_localtime on;</span><br><span class="line">    charset utf-8,gbk;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>  <img src="/assets/img/posts/nginx-image1.png"><br>  <img src="/assets/img/posts/nginx-image2.png"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 转载 </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>代码块整理</title>
      <link href="/posts/29a422a4/"/>
      <url>/posts/29a422a4/</url>
      
        <content type="html"><![CDATA[<h1 id="代码块整理"><a href="#代码块整理" class="headerlink" title="代码块整理"></a>代码块整理</h1><div class="note info flat"><p>如有补充，请在下方留言或联系我</p></div><h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><blockquote><p>这里列举了一些常用的函数，可以直接复制到代码块中使用。<br>更多函数可以查看 <a href="https://www.lodashjs.com/">lodash.js 中文网</a>或者 <a href="https://lodash.com/">lodash.js 官网</a></p></blockquote><details class="toggle" ><summary class="toggle-button" style="">是否数组</summary><div class="toggle-content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 判断是否数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; value 需要判断的值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isArray</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">Array</span>.<span class="property">isArray</span> === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">isArray</span>(value);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(value) === <span class="string">&#x27;[object Array]&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></details><details class="toggle" ><summary class="toggle-button" style="">深度克隆</summary><div class="toggle-content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这只是一个深拷贝的简单的版本，有很多边界情况没有处理。</span></span><br><span class="line"><span class="comment"> * 如果需要一个完美的深拷贝，请使用lodash的 _.cloneDeep 方法。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 深度克隆</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">object</span>&#125; source 需要深度克隆的对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">object</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deepClone</span>(<span class="params">source</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!source &amp;&amp; <span class="keyword">typeof</span> source !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;error arguments&#x27;</span>, <span class="string">&#x27;deepClone&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> targetObj = source.<span class="property">constructor</span> === <span class="title class_">Array</span> ? [] : &#123;&#125;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">keys</span>(source).<span class="title function_">forEach</span>(<span class="function"><span class="params">keys</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (source[keys] &amp;&amp; <span class="keyword">typeof</span> source[keys] === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">      targetObj[keys] = <span class="title function_">deepClone</span>(source[keys])</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      targetObj[keys] = source[keys]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> targetObj</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></details><details class="toggle" ><summary class="toggle-button" style="">获取uuid</summary><div class="toggle-content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 随机唯一值uuid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">guid</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&#x27;</span>.<span class="title function_">replace</span>(<span class="regexp">/[xy]/g</span>, <span class="keyword">function</span> (<span class="params">c</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> r = (<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">16</span>) | <span class="number">0</span>,</span><br><span class="line">      v = c == <span class="string">&#x27;x&#x27;</span> ? r : (r &amp; <span class="number">0x3</span>) | <span class="number">0x8</span>;</span><br><span class="line">    <span class="keyword">return</span> v.<span class="title function_">toString</span>(<span class="number">16</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></details><details class="toggle" ><summary class="toggle-button" style="">获取url参数</summary><div class="toggle-content"><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">方法 1</button><button type="button" class="tab">方法 2</button><button type="button" class="tab">方法 3</button></div><div class="tab-contents"><div class="tab-item-content active"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">url</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">object</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">param2Obj</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> search = <span class="built_in">decodeURIComponent</span>(url.<span class="title function_">split</span>(<span class="string">&#x27;?&#x27;</span>)[<span class="number">1</span>]).<span class="title function_">replace</span>(<span class="regexp">/\+/g</span>, <span class="string">&#x27; &#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (!search) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line">  <span class="keyword">const</span> searchArr = search.<span class="title function_">split</span>(<span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line">  searchArr.<span class="title function_">forEach</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> index = v.<span class="title function_">indexOf</span>(<span class="string">&#x27;=&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (index !== -<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> name = v.<span class="title function_">substring</span>(<span class="number">0</span>, index)</span><br><span class="line">      <span class="keyword">const</span> val = v.<span class="title function_">substring</span>(index + <span class="number">1</span>, v.<span class="property">length</span>)</span><br><span class="line">      obj[name] = val</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 获取url参数或者hash参数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; name 参数名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string|object</span>&#125; 参数值或者对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getUrlParameter</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> array,</span><br><span class="line">    result = &#123;&#125;;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>) &#123;</span><br><span class="line">    array = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>.<span class="title function_">replace</span>(<span class="regexp">/^\?/</span>, <span class="string">&#x27;&#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span>) &#123;</span><br><span class="line">    array = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span>.<span class="title function_">replace</span>(<span class="regexp">/^\#/</span>, <span class="string">&#x27;&#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    array = [];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (array.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> keyValue = array[i].<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">    result[keyValue[<span class="number">0</span>]] = keyValue.<span class="property">length</span> == <span class="number">2</span> ? keyValue[<span class="number">1</span>] : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> name ? result[name] : result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 获取url参数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; name 参数名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125; 参数值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getUrlParam</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;(^|&amp;)&#x27;</span> + name + <span class="string">&#x27;=([^&amp;]*)(&amp;|$)&#x27;</span>, <span class="string">&#x27;i&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> r = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>.<span class="title function_">substr</span>(<span class="number">1</span>).<span class="title function_">match</span>(reg);</span><br><span class="line">  <span class="keyword">if</span> (r != <span class="literal">null</span>) <span class="keyword">return</span> <span class="built_in">unescape</span>(r[<span class="number">2</span>]);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 获取hash参数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; name 参数名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125; 参数值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getHashParam</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;(^|&amp;)&#x27;</span> + name + <span class="string">&#x27;=([^&amp;]*)(&amp;|$)&#x27;</span>, <span class="string">&#x27;i&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> r = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span>.<span class="title function_">substr</span>(<span class="number">1</span>).<span class="title function_">match</span>(reg);</span><br><span class="line">  <span class="keyword">if</span> (r != <span class="literal">null</span>) <span class="keyword">return</span> <span class="built_in">unescape</span>(r[<span class="number">2</span>]);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></details><details class="toggle" ><summary class="toggle-button" style="">获取浏览器类型</summary><div class="toggle-content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 获取浏览器类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; type 指定浏览器类型 1:微信 2:支付宝 3:其他</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string|boolean</span>&#125; 浏览器类型/是否为指定的浏览器类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getBrowserType</span>(<span class="params">type</span>) &#123;</span><br><span class="line">  <span class="comment">// 判断是否是微信浏览器</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">isWechat</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> ua = navigator.<span class="property">userAgent</span>.<span class="title function_">toLowerCase</span>();</span><br><span class="line">    <span class="keyword">return</span> ua.<span class="title function_">match</span>(<span class="regexp">/MicroMessenger/i</span>) == <span class="string">&#x27;micromessenger&#x27;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 判断是否是支付宝浏览器</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">isAlipay</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> ua = navigator.<span class="property">userAgent</span>.<span class="title function_">toLowerCase</span>();</span><br><span class="line">    <span class="keyword">return</span> ua.<span class="title function_">match</span>(<span class="regexp">/AlipayClient/i</span>) == <span class="string">&#x27;alipayclient&#x27;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> browserMap = &#123;</span><br><span class="line">    <span class="number">1</span>: <span class="string">&#x27;wechat&#x27;</span>,</span><br><span class="line">    <span class="number">2</span>: <span class="string">&#x27;alipay&#x27;</span>,</span><br><span class="line">    <span class="number">3</span>: <span class="string">&#x27;other&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> browserType = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;browserType&#x27;</span>) || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">isWechat</span>()) &#123;</span><br><span class="line">    browserType = browserMap[<span class="number">1</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">isAlipay</span>()) &#123;</span><br><span class="line">    browserType = browserMap[<span class="number">2</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    browserType = browserMap[<span class="number">3</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;browserType&#x27;</span>, browserType);</span><br><span class="line">  <span class="keyword">return</span> type ? browserMap[type] === browserType : browserType;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></details><details class="toggle" ><summary class="toggle-button" style="">是否已授权微信/支付宝登录标识</summary><div class="toggle-content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用getBrowserType方法判断浏览器类型</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 是否已授权微信/支付宝登录标识</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isAuth</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> openid = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;openid&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> user_id = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;user_id&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> (openid &amp;&amp; <span class="title function_">getBrowserType</span>(<span class="number">1</span>)) || (user_id &amp;&amp; <span class="title function_">getBrowserType</span>(<span class="number">2</span>));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></details><h2 id="使用微信某个单独的-API-接口"><a href="#使用微信某个单独的-API-接口" class="headerlink" title="使用微信某个单独的 API 接口"></a>使用微信某个单独的 API 接口</h2><blockquote><p>如：通过 jsapi 接口，H5 获取用户的已保存在微信的抬头信息，<a href="https://developers.weixin.qq.com/doc/offiaccount/WeChat_Invoice/Quick_issuing/Interface_Instructions.html">微信文档</a></p></blockquote><p><a href="#wxapiuse">具体实现</a><br><a href="#wxpayapi">具体实现 2</a></p><p><strong>以下示例为微信文档中的内容</strong></p><p>接口没有公开，所以不会暴露在 wx 对象上。</p><p>对于没有公开的接口，都可以用这样的方式调用：</p><ol><li><p><code>wx.config</code> 的时候传入参数 <code>beta: true</code></p></li><li><p><code>wx.invoke(name, args, callback)</code>，其中 <code>name</code> 是接口名，<code>args</code> 是参数对象，<code>callback</code> 是回调函数</p></li></ol><p>具体到这个场景，就是</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">invoke</span>(</span><br><span class="line">  <span class="string">&#x27;chooseInvoiceTitle&#x27;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// 这里要传入参数</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="comment">// 这里处理调用结果</span></span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>请求参数：</strong></p><p><img src="/assets/img/posts/wx-invoice-1.png"></p><p><strong>返回结果</strong><br><img src="/assets/img/posts/wx-invoice-2.png"></p><p><code>choose_invoice_title_info</code>对象的结构如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;腾讯科技(深圳)有限公司&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;taxNumber&quot;</span><span class="punctuation">:</span> <span class="string">&quot;123466789987646131&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;companyAddress&quot;</span><span class="punctuation">:</span> <span class="string">&quot;深圳市南山区某某路腾讯大厦&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;telephone&quot;</span><span class="punctuation">:</span> <span class="string">&quot;123456789&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;bankName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;某某银行&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;bankAccount&quot;</span><span class="punctuation">:</span> <span class="string">&quot;621111111111290&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><b id="wxapiuse">具体实现：</b></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; appId, nonceStr, signature, timestamp &#125; = data;</span><br><span class="line">wx.<span class="title function_">config</span>(&#123;</span><br><span class="line">  <span class="attr">beta</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">jsApiList</span>: [<span class="string">&#x27;chooseInvoiceTitle&#x27;</span>],</span><br><span class="line">  appId,</span><br><span class="line">  nonceStr,</span><br><span class="line">  signature,</span><br><span class="line">  timestamp</span><br><span class="line">&#125;);</span><br><span class="line">wx.<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  wx.<span class="title function_">invoke</span>(</span><br><span class="line">    <span class="string">&#x27;chooseInvoiceTitle&#x27;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">scene</span>: <span class="string">&#x27;1&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (res) &#123;</span><br><span class="line">        <span class="keyword">var</span> info = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(res.<span class="property">choose_invoice_title_info</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取微信抬头成功&#x27;</span>, info);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">wx.<span class="title function_">error</span>(<span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;微信授权错误&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="支付"><a href="#支付" class="headerlink" title="支付"></a>支付</h2><h3 id="微信支付"><a href="#微信支付" class="headerlink" title="微信支付 "></a>微信支付 <sup id="wxpayapi"></sup></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">onBridgeReady</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">WeixinJSBridge</span>.<span class="title function_">invoke</span>(</span><br><span class="line">    <span class="string">&#x27;getBrandWCPayRequest&#x27;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">appId</span>: appId,</span><br><span class="line">      <span class="attr">nonceStr</span>: nonceStr,</span><br><span class="line">      <span class="attr">package</span>: package,</span><br><span class="line">      <span class="attr">signType</span>: signType,</span><br><span class="line">      <span class="attr">timeStamp</span>: timeStamp + <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">paySign</span>: signature</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">err_msg</span> == <span class="string">&#x27;get_brand_wcpay_request:ok&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// 支付成功的处理</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">WeixinJSBridge</span> == <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">addEventListener</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;WeixinJSBridgeReady&#x27;</span>, onBridgeReady, <span class="literal">false</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">attachEvent</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">attachEvent</span>(<span class="string">&#x27;WeixinJSBridgeReady&#x27;</span>, onBridgeReady);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">attachEvent</span>(<span class="string">&#x27;onWeixinJSBridgeReady&#x27;</span>, onBridgeReady);</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="title function_">onBridgeReady</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="支付宝支付（Vue语法）"><a href="#支付宝支付（Vue语法）" class="headerlink" title="支付宝支付（Vue语法）"></a>支付宝支付（Vue语法）</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;payContainer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">&quot;payHtmlString&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">payHtmlString</span>: <span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">aliPay</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> html = <span class="string">&quot;&lt;form id=&#x27;alipaysubmit&#x27;&gt;....&lt;/form&gt;&quot;</span>; <span class="comment">// 接口返回的支付宝表单，其他情况具体另处理</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">payHtmlString</span> = html.<span class="title function_">replace</span>(<span class="regexp">/&lt;script\b[^&gt;]*&gt;[\s\S]*&lt;\/script&gt;/gi</span>, <span class="string">&quot;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">forms</span>[<span class="string">&quot;alipaysubmit&quot;</span>].<span class="title function_">submit</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Request请求封装"><a href="#Request请求封装" class="headerlink" title="Request请求封装"></a>Request请求封装</h2><blockquote><p>仅作参考</p></blockquote><h3 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h3><details class="toggle" ><summary class="toggle-button" style="">uniapp原生请求</summary><div class="toggle-content"><p><strong>uniapp原生请求</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">APIURL</span> = <span class="string">&#x27;xxx&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Common</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">  <span class="title class_">DataGet</span>(url, params = &#123;&#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      uni.<span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="variable constant_">APIURL</span> + url,</span><br><span class="line">        <span class="attr">data</span>: params,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">        <span class="attr">header</span>: &#123; <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span> &#125;,</span><br><span class="line">        <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="title function_">resolve</span>(res.<span class="property">data</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">fail</span>(<span class="params">err</span>) &#123;</span><br><span class="line">          <span class="title function_">reject</span>(err);</span><br><span class="line">          uni.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">            <span class="attr">title</span>: <span class="string">&#x27;网络错误--&#x27;</span> + url,</span><br><span class="line">            <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">DataPost</span>(url, params = &#123;&#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      uni.<span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="variable constant_">APIURL</span> + url,</span><br><span class="line">        <span class="attr">data</span>: params,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">        <span class="attr">header</span>: &#123; <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;json&#x27;</span> &#125;,</span><br><span class="line">        <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="title function_">resolve</span>(res.<span class="property">data</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">fail</span>(<span class="params">err</span>) &#123;</span><br><span class="line">          <span class="title function_">reject</span>(err);</span><br><span class="line">          uni.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">            <span class="attr">title</span>: <span class="string">&#x27;网络错误--&#x27;</span> + url,</span><br><span class="line">            <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Common</span>();</span><br></pre></td></tr></table></figure></div></details><details class="toggle" ><summary class="toggle-button" style="">uniapp + uView + luch-request</summary><div class="toggle-content"><p><strong>uniapp + uView + luch-request</strong></p><blockquote><p><a href="https://www.uviewui.com/">uView</a>的<a href="https://www.uviewui.com/js/http.html">http 请求封装</a>集成自优秀的开源请求库：<a href="https://www.quanzhan.co/luch-request/">luch-request</a>。uView 对其进行了简单封装以及说明，如有不全之处， 可参考<a href="https://www.quanzhan.co/luch-request/">luch-request</a>官方文档。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * uview http请求封装 https://www.uviewui.com/js/http.html</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">CONFIG</span> <span class="keyword">from</span> <span class="string">&#x27;@/common/config&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 此vm参数为页面的实例，可以通过它引用vuex中的变量</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function"><span class="params">vm</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 初始化请求配置 config为默认全局配置</span></span><br><span class="line">  uni.<span class="property">$u</span>.<span class="property">http</span>.<span class="title function_">setConfig</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    config.<span class="property">baseURL</span> = <span class="variable constant_">CONFIG</span>.<span class="property">baseUrl</span>;</span><br><span class="line">    config.<span class="property">method</span> = <span class="string">&#x27;GET&#x27;</span>;</span><br><span class="line">    config.<span class="property">timeout</span> = <span class="number">90000</span>;</span><br><span class="line">    config.<span class="property">header</span> = &#123;&#125;;</span><br><span class="line">    <span class="comment">// 自定义参数</span></span><br><span class="line">    config.<span class="property">custom</span> = &#123;</span><br><span class="line">      <span class="string">&#x27;interceptors.response&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">auth</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">catch</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">loadingText</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 请求拦截</span></span><br><span class="line">  uni.<span class="property">$u</span>.<span class="property">http</span>.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 可使用async await 做异步操作</span></span><br><span class="line">      <span class="comment">// 初始化请求拦截器时，会执行此方法，此时data为undefined，赋予默认&#123;&#125;</span></span><br><span class="line">      config.<span class="property">data</span> = config.<span class="property">data</span> || &#123;&#125;;</span><br><span class="line">      <span class="keyword">if</span> (config?.<span class="property">custom</span>?.<span class="property">baseURL</span>) &#123;</span><br><span class="line">        config.<span class="property">baseURL</span> = config.<span class="property">custom</span>.<span class="property">baseURL</span> || <span class="variable constant_">CONFIG</span>.<span class="property">baseUrl</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 根据custom参数中配置的是否需要token，添加对应的请求头</span></span><br><span class="line">      <span class="keyword">if</span> (config?.<span class="property">custom</span>?.<span class="property">auth</span>) &#123;</span><br><span class="line">        config.<span class="property">header</span>.<span class="property">authorization</span> = vm.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">token</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (config?.<span class="property">custom</span>?.<span class="property">loading</span>) &#123;</span><br><span class="line">        uni.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">          <span class="attr">title</span>: config.<span class="property">custom</span>.<span class="property">loadingText</span> || <span class="string">&#x27;加载中&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> config;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 可使用async await 做异步操作</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(config);</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 响应拦截</span></span><br><span class="line">  uni.<span class="property">$u</span>.<span class="property">http</span>.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">/* 对响应成功做点什么 可使用async await 做异步操作*/</span></span><br><span class="line">      <span class="keyword">const</span> data = response.<span class="property">data</span>;</span><br><span class="line">      <span class="keyword">const</span> custom = response.<span class="property">config</span>?.<span class="property">custom</span>; <span class="comment">// 自定义参数</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (custom.<span class="property">loading</span>) uni.<span class="title function_">hideLoading</span>();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// interceptors.response为false时不需要拦截处理，直接返回响应结果</span></span><br><span class="line">      <span class="keyword">if</span> (!custom[<span class="string">&#x27;interceptors.response&#x27;</span>]) <span class="keyword">return</span> data;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (data.<span class="property">code</span> !== <span class="variable constant_">CONFIG</span>.<span class="property">successCode</span>) &#123;</span><br><span class="line">        <span class="comment">// 如果没有显式定义custom的toast参数为false的话，默认对报错进行toast弹出提示</span></span><br><span class="line">        <span class="keyword">if</span> (custom.<span class="property">toast</span> !== <span class="literal">false</span>) &#123;</span><br><span class="line">          uni.<span class="property">$u</span>.<span class="title function_">toast</span>(data.<span class="property">msg</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果需要catch返回，则进行reject</span></span><br><span class="line">        <span class="keyword">if</span> (custom?.<span class="property">catch</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(data);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 否则返回一个pending中的promise，请求不会进入catch中</span></span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">() =&gt;</span> &#123;&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// return data.data === undefined ? &#123;&#125; : data.data;</span></span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 对响应错误做点什么 （statusCode !== 200）</span></span><br><span class="line">      uni.<span class="title function_">hideLoading</span>();</span><br><span class="line">      <span class="keyword">const</span> msg = response.<span class="property">data</span>?.<span class="property">msg</span>;</span><br><span class="line">      uni.<span class="property">$u</span>.<span class="title function_">toast</span>(<span class="string">`<span class="subst">$&#123;response.statusCode&#125;</span>：<span class="subst">$&#123;msg || <span class="string">&#x27;请求出错，请稍后再试&#x27;</span>&#125;</span>`</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(response);</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>requestDemo</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = uni.<span class="property">$u</span>.<span class="property">http</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// get请求示例 uni.$u.http.get(url[, config])</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getApi</span> = data =&gt;</span><br><span class="line">  http.<span class="title function_">get</span>(<span class="string">&#x27;/ebapi/public_api/index&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">userName</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">      <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// post请求示例 uni.$u.http.post(url[, data[, config]])</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">postApi</span> = data =&gt; http.<span class="title function_">post</span>(<span class="string">&#x27;/ebapi/public_api/index&#x27;</span>, data, config);</span><br><span class="line"></span><br><span class="line"><span class="comment">// upload请求示例 uni.$u.http.upload(url[, config])</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">uploadApi</span> = data =&gt;</span><br><span class="line">  http.<span class="title function_">upload</span>(<span class="string">&#x27;/ebapi/public_api/index&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;&#125;,</span><br><span class="line">    <span class="comment">// #ifdef APP-PLUS || H5</span></span><br><span class="line">    <span class="attr">files</span>: [], <span class="comment">// 需要上传的文件列表。使用 files 时，filePath 和 name 不生效。App、H5（ 2.6.15+）</span></span><br><span class="line">    <span class="comment">// #endif</span></span><br><span class="line">    <span class="comment">// #ifdef MP-ALIPAY</span></span><br><span class="line">    <span class="attr">fileType</span>: <span class="string">&#x27;image/video/audio&#x27;</span>, <span class="comment">// 仅支付宝小程序，且必填。</span></span><br><span class="line">    <span class="comment">// #endif</span></span><br><span class="line">    <span class="attr">filePath</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 要上传文件资源的路径。</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;file&#x27;</span>,</span><br><span class="line">    <span class="attr">formData</span>: &#123;&#125;, <span class="comment">// HTTP 请求中其他额外的 form data</span></span><br><span class="line">    <span class="attr">getTask</span>: <span class="function">(<span class="params">task, options</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// task.onProgressUpdate((res) =&gt; &#123;</span></span><br><span class="line">      <span class="comment">//   console.log(&#x27;上传进度&#x27; + res.progress);</span></span><br><span class="line">      <span class="comment">//   console.log(&#x27;已经上传的数据长度&#x27; + res.totalBytesSent);</span></span><br><span class="line">      <span class="comment">//   console.log(&#x27;预期需要上传的数据总长度&#x27; + res.totalBytesExpectedToSend);</span></span><br><span class="line">      <span class="comment">//</span></span><br><span class="line">      <span class="comment">//   // 测试条件，取消上传任务。</span></span><br><span class="line">      <span class="comment">//   if (res.progress &gt; 50) &#123;</span></span><br><span class="line">      <span class="comment">//     uploadTask.abort();</span></span><br><span class="line">      <span class="comment">//   &#125;</span></span><br><span class="line">      <span class="comment">// &#125;);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// request请求示例 uni.$u.http.request(config)</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">postMenu</span> = params =&gt;</span><br><span class="line">  http.<span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>, <span class="comment">// 请求方法必须大写 [GET|POST|PUT|DELETE|CONNECT|HEAD|OPTIONS|TRACE]</span></span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/user/12345&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">firstName</span>: <span class="string">&#x27;Fred&#x27;</span>,</span><br><span class="line">      <span class="attr">lastName</span>: <span class="string">&#x27;Flintstone&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">token</span>: <span class="string">&#x27;1111&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">custom</span>: &#123;&#125; <span class="comment">// 自定义参数</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></div></details><details class="toggle" ><summary class="toggle-button" style="">uniapp + luch-request</summary><div class="toggle-content"><p><strong>uniapp + luch-request</strong></p><p><a href="https://www.quanzhan.co/luch-request/">luch-request 文档</a><br><a href="http://ext.dcloud.net.cn/plugin?id=392">插件安装</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Request</span> <span class="keyword">from</span> <span class="string">&#x27;@/utils/luch-request/index.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">CONFIG</span> <span class="keyword">from</span> <span class="string">&#x27;@/utils/config.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> encrypt <span class="keyword">from</span> <span class="string">&#x27;@/utils/function/encrypt.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">// 自定义错误提示，可删</span></span><br><span class="line"><span class="comment">const showStatus = (status) =&gt; &#123;</span></span><br><span class="line"><span class="comment">let message = &#x27;&#x27;</span></span><br><span class="line"><span class="comment">switch (status) &#123;</span></span><br><span class="line"><span class="comment">case 400:</span></span><br><span class="line"><span class="comment">message = &#x27;请求错误(400)&#x27;</span></span><br><span class="line"><span class="comment">break</span></span><br><span class="line"><span class="comment">case 401:</span></span><br><span class="line"><span class="comment">message = &#x27;未授权，请重新登录(401)&#x27;</span></span><br><span class="line"><span class="comment">break</span></span><br><span class="line"><span class="comment">case 403:</span></span><br><span class="line"><span class="comment">message = &#x27;拒绝访问(403)&#x27;</span></span><br><span class="line"><span class="comment">break</span></span><br><span class="line"><span class="comment">case 404:</span></span><br><span class="line"><span class="comment">message = &#x27;请求出错(404)&#x27;</span></span><br><span class="line"><span class="comment">break</span></span><br><span class="line"><span class="comment">case 408:</span></span><br><span class="line"><span class="comment">message = &#x27;请求超时(408)&#x27;</span></span><br><span class="line"><span class="comment">break</span></span><br><span class="line"><span class="comment">case 500:</span></span><br><span class="line"><span class="comment">message = &#x27;服务器错误(500)&#x27;</span></span><br><span class="line"><span class="comment">break</span></span><br><span class="line"><span class="comment">case 501:</span></span><br><span class="line"><span class="comment">message = &#x27;服务未实现(501)&#x27;</span></span><br><span class="line"><span class="comment">break</span></span><br><span class="line"><span class="comment">case 502:</span></span><br><span class="line"><span class="comment">message = &#x27;网络错误(502)&#x27;</span></span><br><span class="line"><span class="comment">break</span></span><br><span class="line"><span class="comment">case 503:</span></span><br><span class="line"><span class="comment">message = &#x27;服务不可用(503)&#x27;</span></span><br><span class="line"><span class="comment">break</span></span><br><span class="line"><span class="comment">case 504:</span></span><br><span class="line"><span class="comment">message = &#x27;网络超时(504)&#x27;</span></span><br><span class="line"><span class="comment">break</span></span><br><span class="line"><span class="comment">case 505:</span></span><br><span class="line"><span class="comment">message = &#x27;HTTP版本不受支持(505)&#x27;</span></span><br><span class="line"><span class="comment">break</span></span><br><span class="line"><span class="comment">default:</span></span><br><span class="line"><span class="comment">message = `连接出错($&#123;status&#125;)!`</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">return `$&#123;message&#125;，请检查网络或联系管理员！`</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">BASE_URL</span> = <span class="variable constant_">CONFIG</span>.<span class="property">base_url</span>;</span><br><span class="line"><span class="comment">// const BASE_URL = CONFIG.test_url;</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">HEADER</span> = <span class="variable constant_">CONFIG</span>.<span class="property">header</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">SUCCESS_CODE</span> = <span class="variable constant_">CONFIG</span>.<span class="property">successCode</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 修改全局配置</span></span><br><span class="line"><span class="comment"> * 两种方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 1. 实例对象时</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="keyword">new</span> <span class="title class_">Request</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="variable constant_">BASE_URL</span>,</span><br><span class="line">  <span class="attr">header</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">  <span class="attr">dataType</span>: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">  <span class="attr">responseType</span>: <span class="string">&#x27;text&#x27;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">300000</span>,</span><br><span class="line">  <span class="comment">// 跨域请求时是否携带凭证（cookies）仅H5支持（HBuilderX 2.6.15+）</span></span><br><span class="line">  <span class="attr">withCredentials</span>: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 调用实例方法</span></span><br><span class="line"><span class="comment">/* const http = new Request()</span></span><br><span class="line"><span class="comment">http.setConfig((config) =&gt; &#123;</span></span><br><span class="line"><span class="comment">config.baseURL = BASE_URL;</span></span><br><span class="line"><span class="comment">config.header = &#123;</span></span><br><span class="line"><span class="comment">&#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">return config</span></span><br><span class="line"><span class="comment">&#125;) */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 请求之前拦截器。可以使用async await 做异步操作 */</span></span><br><span class="line">http.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// =========== token示例 可删 ===========</span></span><br><span class="line">    <span class="comment">/* config.header = &#123;</span></span><br><span class="line"><span class="comment">...config.header,</span></span><br><span class="line"><span class="comment">token: getTokenStorage()</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">// 如果token不存在，return Promise.reject(config) 会取消本次请求</span></span><br><span class="line"><span class="comment">if (!token) &#123;</span></span><br><span class="line"><span class="comment">return Promise.reject(config)</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(config);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 请求之后拦截器。可以使用async await 做异步操作  */</span></span><br><span class="line">http.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">async</span> response =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> status = response.<span class="property">status</span>;</span><br><span class="line">    <span class="keyword">const</span> data = response.<span class="property">data</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> message = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="comment">// 失败响应码处理</span></span><br><span class="line">    <span class="keyword">if</span> (status &lt; <span class="number">200</span> || status &gt;= <span class="number">400</span>) &#123;</span><br><span class="line">      message = data.<span class="property">msg</span> || <span class="string">`请求失败(<span class="subst">$&#123;status&#125;</span>)，请检查网络或联系管理员！`</span>; <span class="comment">// 或可选showStatus(status);</span></span><br><span class="line">      uni.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: message,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(response);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> code = data.<span class="property">code</span> || <span class="variable constant_">SUCCESS_CODE</span>;</span><br><span class="line">      <span class="keyword">const</span> msg = data.<span class="property">msg</span> || <span class="string">&#x27;请求成功&#x27;</span>;</span><br><span class="line">      <span class="keyword">const</span> inWhiteList = <span class="variable constant_">CONFIG</span>.<span class="property">whiteList</span>.<span class="title function_">includes</span>(response.<span class="property">config</span>.<span class="property">url</span>); <span class="comment">// 请求地址是否在白名单内</span></span><br><span class="line">      <span class="keyword">if</span> (code !== <span class="variable constant_">SUCCESS_CODE</span> &amp;&amp; !inWhiteList) &#123;</span><br><span class="line">        uni.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">          <span class="attr">title</span>: msg,</span><br><span class="line">          <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 服务器状态码不是200的情况 请求错误做点什么。可以使用async await 做异步操作</span></span><br><span class="line">    uni.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;请求超时或服务器异常，请检查网络或联系管理员！&#x27;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; http &#125;;</span><br></pre></td></tr></table></figure></div></details><h3 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h3><details class="toggle" ><summary class="toggle-button" style="">Promise 方式</summary><div class="toggle-content"><p><strong>Promise 方式</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">httpRequest</span>(<span class="params">options</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; url, data, methods, dataType, headers, contentType &#125; = options;</span><br><span class="line">    <span class="keyword">let</span> settings = &#123;</span><br><span class="line">      <span class="attr">url</span>: config.<span class="property">baseUrl</span> + url,</span><br><span class="line">      <span class="attr">dataType</span>: dataType || <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: data,</span><br><span class="line">      <span class="attr">type</span>: methods || <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">      <span class="attr">headers</span>: headers || &#123;&#125;,</span><br><span class="line">      <span class="attr">contentType</span>: contentType || <span class="string">&#x27;application/x-www-form-urlencoded;charset=utf-8&#x27;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">        options.<span class="property">success</span> &amp;&amp; options.<span class="title function_">success</span>(data);</span><br><span class="line">        <span class="title function_">resolve</span>(data);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">error</span>: <span class="keyword">function</span> (<span class="params">XMLHttpRequest, textStatus, errorThrown</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(errorThrown)</span><br><span class="line">        <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;requestError: &#x27;</span> + <span class="title class_">XMLHttpRequest</span>.<span class="property">responseText</span>))</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="attr">error</span>: <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">        <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(error))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (options.<span class="property">jsonpCallback</span>) &#123;</span><br><span class="line">      settings.<span class="property">jsonpCallback</span> = options.<span class="property">jsonpCallback</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    $.<span class="title function_">ajax</span>(settings);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>具体使用</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 微信jssdk配置初始化</span></span><br><span class="line"><span class="keyword">const</span> api_initWxjssdk = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">httpRequest</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/weixin/js-init&#x27;</span>,</span><br><span class="line">    <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">url</span>: location.<span class="property">href</span>,</span><br><span class="line">      <span class="attr">source</span>: <span class="string">&#x27;test&#x27;</span> <span class="comment">// 微信模块</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">jsonpCallback</span>: <span class="string">&#x27;jscfg&#x27;</span>,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">result</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;wx-config:&#x27;</span>, $.<span class="title function_">parseJSON</span>(result.<span class="property">jsCfg</span>));</span><br><span class="line">      wx.<span class="title function_">config</span>($.<span class="title function_">parseJSON</span>(result.<span class="property">jsCfg</span>));</span><br><span class="line">      wx.<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// config信息验证后会执行ready方法，异步操作</span></span><br><span class="line">      &#125;);</span><br><span class="line">      wx.<span class="title function_">error</span>(<span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="comment">// config信息验证失败会执行error函数</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// api封装</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">api_checkIsBind</span> = openid =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">httpRequest</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/jump-lake2021/bool-bind&#x27;</span>,</span><br><span class="line">    <span class="attr">methods</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      openid</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="title function_">api_checkIsBind</span>(<span class="string">&#x27;12345&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> code = res.<span class="property">code</span>;</span><br><span class="line">  <span class="keyword">const</span> data = res.<span class="property">data</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div></details><details class="toggle" ><summary class="toggle-button" style="">callback 方式</summary><div class="toggle-content"><p><strong>callback 方式</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> httpRequest = <span class="keyword">function</span> (<span class="params">params</span>) &#123;</span><br><span class="line">  $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: config.<span class="property">baseUrl</span> + params.<span class="property">url</span>,</span><br><span class="line">    <span class="attr">type</span>: params.<span class="property">methods</span> || <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">dataType</span>: params.<span class="property">dataType</span> || <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: params.<span class="property">data</span> || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: params.<span class="property">headers</span> || &#123;&#125;,</span><br><span class="line">    <span class="comment">// timeout: 2000,</span></span><br><span class="line">    <span class="comment">// jsonpCallback: &#x27;jscfg&#x27;,</span></span><br><span class="line">    <span class="comment">// async: false,</span></span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">result</span>) &#123;</span><br><span class="line">      params.<span class="title function_">success</span>(result);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>具体使用</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// api封装</span></span><br><span class="line"><span class="keyword">var</span> api_authorize = <span class="keyword">function</span> (<span class="params">param</span>) &#123;</span><br><span class="line">  <span class="title function_">httpRequest</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/authorize/authorize&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: param.<span class="property">data</span>,</span><br><span class="line">    <span class="attr">success</span>: param.<span class="property">success</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="title function_">api_authorize</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">openid</span>: <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;ZSRQ_openid&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div></details><h3 id="微信小程序"><a href="#微信小程序" class="headerlink" title="微信小程序"></a>微信小程序</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="variable constant_">CONFIG</span> <span class="keyword">from</span> <span class="string">&#x27;../utils/config.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">BASE_URL</span> = <span class="variable constant_">CONFIG</span>.<span class="property">base_url</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">HEADER</span> = <span class="variable constant_">CONFIG</span>.<span class="property">header</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">SUCCESS_CODE</span> = <span class="variable constant_">CONFIG</span>.<span class="property">successCode</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">hideLoading</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">loading</span> &amp;&amp; wx.<span class="title function_">hideLoading</span>();</span><br><span class="line">  <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">loading</span> = <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">request</span>(<span class="params">options</span>) &#123;</span><br><span class="line">  <span class="comment">// 使用globalData中的loading变量隐藏loading提示，防止真机的不可控报错</span></span><br><span class="line">  <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">loading</span> &amp;&amp; wx.<span class="title function_">hideLoading</span>();</span><br><span class="line">  wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">    <span class="attr">title</span>: options.<span class="property">loadingText</span> || <span class="string">&#x27;加载中&#x27;</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">loading</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> requestUrl = <span class="variable constant_">BASE_URL</span> + options.<span class="property">url</span>;</span><br><span class="line">  <span class="keyword">let</span> headers = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, <span class="variable constant_">HEADER</span>, options.<span class="property">header</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: requestUrl,</span><br><span class="line">      <span class="attr">header</span>: headers,</span><br><span class="line">      <span class="attr">method</span>: options.<span class="property">method</span> || <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">      <span class="attr">timeout</span>: <span class="number">300000</span>,</span><br><span class="line">      <span class="attr">data</span>: options.<span class="property">data</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">        <span class="title function_">hideLoading</span>();</span><br><span class="line">        <span class="keyword">const</span> status = response.<span class="property">statusCode</span>;</span><br><span class="line">        <span class="keyword">const</span> data = response.<span class="property">data</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> message = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="comment">// 失败响应码处理</span></span><br><span class="line">        <span class="keyword">if</span> (status &lt; <span class="number">200</span> || status &gt;= <span class="number">400</span>) &#123;</span><br><span class="line">          message = data.<span class="property">msg</span> || <span class="string">`请求失败(<span class="subst">$&#123;status&#125;</span>)，请检查网络或联系管理员！`</span>;</span><br><span class="line">          wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">            <span class="attr">title</span>: message,</span><br><span class="line">            <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="keyword">return</span> <span class="title function_">reject</span>(response);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> code = data.<span class="property">code</span> || <span class="variable constant_">SUCCESS_CODE</span>;</span><br><span class="line">          <span class="keyword">const</span> msg = data.<span class="property">msg</span> || <span class="string">&#x27;请求成功&#x27;</span>;</span><br><span class="line">          <span class="keyword">const</span> inWhiteList = config.<span class="property">whiteList</span>.<span class="title function_">includes</span>(options.<span class="property">url</span>); <span class="comment">// 请求地址是否在白名单内</span></span><br><span class="line">          <span class="keyword">if</span> (code !== <span class="variable constant_">SUCCESS_CODE</span> &amp;&amp; !inWhiteList) &#123;</span><br><span class="line">            wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">              <span class="attr">title</span>: msg,</span><br><span class="line">              <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">              <span class="attr">duration</span>: <span class="number">2500</span></span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">resolve</span>(response);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">        <span class="title function_">hideLoading</span>();</span><br><span class="line">        wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;请求超时或服务器异常，请检查网络或联系管理员！&#x27;</span>,</span><br><span class="line">          <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">          <span class="attr">duration</span>: <span class="number">2500</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="title function_">reject</span>(err);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">complete</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;&#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  request</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="常用代码库"><a href="#常用代码库" class="headerlink" title="常用代码库"></a>常用代码库</h2><h3 id="wx-js-微信-jssdk-初始化-授权"><a href="#wx-js-微信-jssdk-初始化-授权" class="headerlink" title="wx.js (微信 jssdk 初始化+授权)"></a>wx.js (微信 jssdk 初始化+授权)</h3><blockquote><p><a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html">微信网页授权，微信 jssdk 初始化</a><br>url 和 source 根据项目需求自行修改</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 微信授权和jssdk</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 微信风格错误提示</span></span><br><span class="line"><span class="keyword">var</span> errorPage = <span class="string">`&lt;div class=&quot;page&quot;&gt;&lt;div class=&quot;weui-msg&quot;&gt;&lt;div class=&quot;weui-msg__icon-area&quot;&gt;&lt;i class=&quot;weui-icon-warn weui-icon_msg&quot;&gt;&lt;/i&gt;&lt;/div&gt;&lt;div class=&quot;weui-msg__text-area&quot;&gt;&lt;h2 class=&quot;weui-msg__title&quot;&gt;操作失败&lt;/h2&gt;&lt;p class=&quot;weui-msg__desc&quot;&gt;请用微信内置浏览器打开&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;`</span>;</span><br><span class="line"><span class="keyword">var</span> errorPageCss =</span><br><span class="line">  <span class="string">&quot;&lt;style&gt;.weui-msg&#123;padding-top:48px;padding:calc(48px + constant(safe-area-inset-top)) constant(safe-area-inset-right) constant(safe-area-inset-bottom) constant(safe-area-inset-left);padding:calc(48px + env(safe-area-inset-top)) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);text-align:center;line-height:1.4;min-height:100%;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;background-color:#fff;&#125;.weui-msg__icon-area&#123;margin-bottom:32px;&#125;.weui-msg__text-area&#123;margin-bottom:32px;padding:0 32px;-webkit-box-flex:1;-webkit-flex:1;flex:1;line-height:1.6;&#125;.weui-msg__text-area:first-child&#123;padding-top:96px;&#125;.weui-msg__title&#123;font-weight:700;font-size:22px;&#125;.weui-msg__desc,.weui-msg__title&#123;margin-bottom:16px;word-wrap:break-word;word-break:break-all;&#125;.weui-msg__desc&#123;font-size:17px;color:rgba(0,0,0,0.9);&#125;.weui-icon-warn:before&#123;content:&#x27;&#x27;;margin:0;width:64px;height:64px;display:block;background:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAASKSURBVGiB7ZpNaBNNGMefZyat0GaVttY1YvGQBnIRq0XqoYVYbQ+eBaEH0aNK8Oi1V48lVI+Kh4IgRVApiNZAe4mlevEQSHMoBfNRm6hJW4i783hI8COzSfYryZvX/k6bmdl5/v/dyczOBxIRdDKs3QKccmCg3XS8AY/L9RWLlExSKkXJJOj673TO0e9Hnw/9fvB6XQyILvRCmkaJhHj7VqytQaHQuLyisPPn2aVLGAiAx+kTdGbg+3f92TOxvAx7e3Zu7+lhk5P86lU4fNi2BLsG9vb0J0/Eu3fw44ft2BW6utjFi/z6dejpsXG3dQNCiGhUf/wYikUb8Wri9fIbN1goBMxav2LRQKGgz8+LtTVozviNZ8/yO3ewv9/CLeYNUDKp379PX77Y0mZa0NGj/N499PvNljdpgD580ObmTHUyzlEUz927eO6cmbKmDIhYTI9EbHY19jDtofE/huJx/cGDlqoHgEJBm5ujeLxhwQYGKJPRI5EWtZwqCgU9EqFMpn6pugOhpomFBUql7IRXFH7tGihKRcrTpzaeAqVSYmGBh8N1Bux6BkQ0KlZXrUYtg4cO4YUL5Q6Rcjl8/pxsvUaxuoqnT7PLl2sVqNmEKJsVi4tN6u8tQCQWFymbrZVfwwCRWFqidLpZsqxA6bRYWqr1KI0N0OamiEabKMoitLJCnz8bZhkbECsr8O1bMyVZg3I5sbxsmGVkIJ+nWKy5iqxDsRjk83K6gQGxsdGw9209lMmIjQ053cAAra//NRu0GZBAiMq1EC70ZrpO6+tysmSgWKREwmkwANrfh1yu8iOXo/19F+pMJORJSLUBymRoe9t5sGZA29ty25YM7OzA7m6rJFlkd5d2dqrSpCa0tdX+0bcWRLC1VZUmvYG2fHiaRpYnvQHpHf23aNyEOo0DA+1GMjAw0A4ZppHkVRvA8iTQOZoGpVLlulQCTXOlVlmeNKUcGgJEF4aCUkm8f4/5PJQ/AX6ZcQIiDA1VpVUbwIEB6O11Zd1TvHzpvJK/6O3Fxk1IVXFw0OXALoGDg6iqVYnSn9jrxUCgRYosgoGAvLtj0I3i6Chw7k5Mzl2sCkdH5WSDdSE2PCxUtdYk2ixdXfzmTTY9DQDi9Wv90SOHWyGoqmx4WE43Gsj6+nBszEkwAGAjI2xqChgDxtjUFBsZcVghjo1BX59BIOPwExNw5IijgN3dvxsP59Dd7aQy7O9nk5OGWcYG8NQpFgo5CUmbm/D1a+U6nSaj+bh5cGICT5wwzqq1P0DZrD4762RxDk+eZFeugBDixQsnyxx4/DifncVjx4xz62xwiDdv9IcP2zxBQ+S3btlZ3AUAFgqx8XH3NVmBjY/Xb8x1P6c9HjYzgz6fu5rMgz4fm5mpv5vfYD6AqsrDYXDrE9USisLDYfnboYrGExoMBvnt2/a20e1T3uQLBhsW/De2Wct09kZ3Gcrl9Pl5+vjRljYTapp61KBCZx/2+EUHH7f5kw4+8PQnmkbxuHj1Snz6ZGplW1HYmTNsehqDwXYfOZPpyEN/beX/t7TYaRwYaDc/AcyLEvgVsZj4AAAAAElFTkSuQmCC&#x27;);&#125;.weui-icon_msg.weui-icon-warn&#123;color:#fa5151;font-size:64px;display:inline-block;vertical-align:middle;font:normal normal normal 14px/1 weui;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;&#125;&lt;/style&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 微信jssdk配置初始化</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">api_initWxjssdk</span>(<span class="params">params</span>) &#123;</span><br><span class="line">  $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;//初始化jssdk的接口地址&#x27;</span>,</span><br><span class="line">    <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">2000</span>,</span><br><span class="line">    <span class="attr">jsonpCallback</span>: <span class="string">&#x27;jscfg&#x27;</span>,</span><br><span class="line">    <span class="comment">// async: false,</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>,</span><br><span class="line">      <span class="attr">source</span>: <span class="string">&#x27;test2&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">result</span>) &#123;</span><br><span class="line">      wx.<span class="title function_">config</span>($.<span class="title function_">parseJSON</span>(result.<span class="property">jsCfg</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取url中所有的参数 name: 特定参数</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getUrlParameter</span> = name =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> array,</span><br><span class="line">    result = &#123;&#125;;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>) &#123;</span><br><span class="line">    array = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>.<span class="title function_">replace</span>(<span class="regexp">/^\?/</span>, <span class="string">&#x27;&#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span>) &#123;</span><br><span class="line">    array = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span>.<span class="title function_">replace</span>(<span class="regexp">/^\#/</span>, <span class="string">&#x27;&#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    array = [];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (array.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> keyValue = array[i].<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">    result[keyValue[<span class="number">0</span>]] = keyValue.<span class="property">length</span> == <span class="number">2</span> ? keyValue[<span class="number">1</span>] : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> name ? result[name] : result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 浏览器类型</span></span><br><span class="line"><span class="keyword">var</span> browser = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> u = navigator.<span class="property">userAgent</span>;</span><br><span class="line">  <span class="keyword">var</span> ua = u.<span class="title function_">toLowerCase</span>();</span><br><span class="line">  <span class="keyword">var</span> browser = &#123;</span><br><span class="line">    <span class="attr">runOnlyWx</span>: <span class="literal">true</span>, <span class="comment">// 是否只在微信浏览器环境运行</span></span><br><span class="line">    <span class="attr">isWeChat</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">isWechatdevtools</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">isIos</span>: <span class="regexp">/iPhone/i</span>.<span class="title function_">test</span>(ua),</span><br><span class="line">    <span class="attr">isAndroid</span>: <span class="regexp">/Android/i</span>.<span class="title function_">test</span>(ua),</span><br><span class="line">    <span class="attr">ua</span>: ua,</span><br><span class="line">    <span class="attr">mobile</span>: !!u.<span class="title function_">match</span>(<span class="regexp">/AppleWebKit.*Mobile.*/</span>)</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  browser.<span class="property">isWeChat</span> = browser.<span class="property">ua</span>.<span class="title function_">match</span>(<span class="regexp">/MicroMessenger/i</span>) == <span class="string">&#x27;micromessenger&#x27;</span>;</span><br><span class="line">  browser.<span class="property">isWechatdevtools</span> = browser.<span class="property">ua</span>.<span class="title function_">match</span>(<span class="regexp">/wechatdevtools/i</span>) == <span class="string">&#x27;wechatdevtools&#x27;</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Browser:&#x27;</span>, browser);</span><br><span class="line">  <span class="comment">// 运行在非手机环境时显示提示</span></span><br><span class="line">  <span class="keyword">if</span> (browser.<span class="property">mobile</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (browser.<span class="property">runOnlyWx</span> &amp;&amp; !browser.<span class="property">isWeChat</span>) &#123;</span><br><span class="line">      $(<span class="string">&#x27;#app&#x27;</span>).<span class="title function_">before</span>(errorPageCss).<span class="title function_">html</span>(errorPage); <span class="comment">// 微信风格错误提示</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    $(<span class="string">&#x27;#app&#x27;</span>).<span class="title function_">html</span>(<span class="string">&#x27;请用手机浏览器打开&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">globalData</span> = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, <span class="variable language_">window</span>.<span class="property">globalData</span>, &#123;</span><br><span class="line">    <span class="attr">browser</span>: browser</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> browser;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (browser.<span class="property">mobile</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> ua = navigator.<span class="property">userAgent</span>.<span class="title function_">toLowerCase</span>();</span><br><span class="line">  <span class="keyword">if</span> (browser.<span class="property">isWeChat</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> openid = <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;SDGAME_openid&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (openid == <span class="literal">null</span>) &#123;</span><br><span class="line">      openid = <span class="title function_">getUrlParameter</span>(<span class="string">&#x27;openid&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (openid == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&#x27;https://服务器授权微信api接口地址?redirect=&#x27;</span> + <span class="built_in">encodeURI</span>(location.<span class="property">href</span>) + <span class="string">&#x27;&amp;source=test2&amp;auth_type=snsapi_base&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (openid != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;SDGAME_openid&#x27;</span>, openid);</span><br><span class="line">      <span class="title function_">api_initWxjssdk</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wx.<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  wx.<span class="title function_">hideAllNonBaseMenuItem</span>();</span><br><span class="line">  wx.<span class="title function_">showMenuItems</span>(&#123;</span><br><span class="line">    <span class="attr">menuList</span>: [<span class="string">&#x27;menuItem:share:appMessage&#x27;</span>, <span class="string">&#x27;menuItem:share:timeline&#x27;</span>, <span class="string">&#x27;menuItem:refresh&#x27;</span>, <span class="string">&#x27;menuItem:profile&#x27;</span>, <span class="string">&#x27;menuItem:addContact&#x27;</span>, <span class="string">&#x27;menuItem:copyUrl&#x27;</span>, <span class="string">&#x27;menuItem:favorite&#x27;</span>]</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">var</span> imgsUrl = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>;</span><br><span class="line">  <span class="keyword">var</span> imgFxUrl = imgsUrl.<span class="title function_">substring</span>(<span class="number">0</span>, imgsUrl.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">var</span> shareData = &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">desc</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">link</span>: location.<span class="property">href</span>.<span class="title function_">split</span>(<span class="string">&#x27;?&#x27;</span>)[<span class="number">0</span>] + <span class="string">&#x27;?share=1&#x27;</span>,</span><br><span class="line">    <span class="attr">imgUrl</span>: imgFxUrl + <span class="string">&#x27;/img/share.jpg&#x27;</span></span><br><span class="line">  &#125;;</span><br><span class="line">  wx.<span class="title function_">onMenuShareAppMessage</span>(shareData);</span><br><span class="line">  wx.<span class="title function_">onMenuShareTimeline</span>(shareData);</span><br><span class="line">  <span class="keyword">var</span> u = navigator.<span class="property">userAgent</span>;</span><br><span class="line">  <span class="keyword">var</span> isAndroid = u.<span class="title function_">indexOf</span>(<span class="string">&#x27;Android&#x27;</span>) &gt; -<span class="number">1</span> || u.<span class="title function_">indexOf</span>(<span class="string">&#x27;Linux&#x27;</span>) &gt; -<span class="number">1</span>; <span class="comment">//g</span></span><br><span class="line">  <span class="keyword">var</span> isIOS = !!u.<span class="title function_">match</span>(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>); <span class="comment">//ios终端</span></span><br><span class="line">  <span class="keyword">if</span> (isAndroid) &#123;</span><br><span class="line">    wx.<span class="title function_">updateAppMessageShareData</span>(shareData);</span><br><span class="line">    wx.<span class="title function_">updateTimelineShareData</span>(shareData);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="常用js"><a href="#常用js" class="headerlink" title="常用js"></a>常用js</h3><blockquote><p>链接仅展示代码，如需使用请将代码复制到项目中</p></blockquote><table><thead><tr><th>名称</th><th>链接</th></tr></thead><tbody><tr><td>rem 适配</td><td><a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/rem.js">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/rem.js</a></td></tr><tr><td>禁止下拉 dis-scroll.js</td><td><a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/dis-scroll.js">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/dis-scroll.js</a></td></tr><tr><td>预加载资源 preload.js</td><td><a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/preload.js">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/preload.js</a></td></tr><tr><td>jquery (v3.4.1)</td><td><a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/jQuery.min.js">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/jQuery.min.js</a></td></tr><tr><td>jquery (v2.1.4)</td><td><a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/jQueryv2.min.js">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/jQueryv2.min.js</a></td></tr><tr><td>微信sdk jweixin (1.6.0)</td><td><a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/jweixin.js">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/jweixin.js</a></td></tr><tr><td>html2canvas (1.4.1)</td><td><a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/html2canvas.js">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/html2canvas.js</a></td></tr><tr><td>Vue (v2.6.10)</td><td><a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/vue.min.js">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/js/vue.min.js</a></td></tr></tbody></table><h3 id="常用CSS"><a href="#常用CSS" class="headerlink" title="常用CSS"></a>常用CSS</h3><blockquote><p>链接仅展示代码，如需使用请将代码复制到项目中</p></blockquote><table><thead><tr><th>名称</th><th>链接</th></tr></thead><tbody><tr><td>weui.css</td><td><a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/css/weui.min.css">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/css/weui.min.css</a></td></tr><tr><td>animate.css</td><td><a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/css/animate.min.css">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/css/animate.min.css</a></td></tr><tr><td>初始化样式 initialize.css</td><td><a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/css/initialize.css">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/css/initialize.css</a></td></tr><tr><td>自定义公共样式 common.css</td><td><a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/css/common.css">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/css/common.css</a></td></tr></tbody></table><h3 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h3><blockquote><p>链接仅展示代码，如需使用请将代码复制到项目中</p></blockquote><table><thead><tr><th>名称</th><th>链接</th></tr></thead><tbody><tr><td>省市区级联数据</td><td><a href="https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/city.json">https://cdn.jamesy.cn/gh/JamesY-Jey/public/assets/city.json</a></td></tr></tbody></table><h2 id="公共CDN"><a href="#公共CDN" class="headerlink" title="公共CDN"></a>公共CDN</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># weui</span></span><br><span class="line">https://res.wx.qq.com/t/wx_fed/cdn_libs/res/weui/1.2.3/weui.min.js</span><br><span class="line">https://res.wx.qq.com/open/libs/weui/2.0.1/weui.min.css</span><br><span class="line">https://res.wx.qq.com/open/libs/weui/2.3.0/weui.min.css</span><br><span class="line"></span><br><span class="line"><span class="comment"># wxjssdk</span></span><br><span class="line">https://res.wx.qq.com/open/js/jweixin-1.6.0.js</span><br><span class="line">https://res.wx.qq.com/open/js/jweixin-1.2.0.js</span><br><span class="line"></span><br><span class="line"><span class="comment"># vconsole</span></span><br><span class="line">https://unpkg.com/vconsole/dist/vconsole.min.js</span><br><span class="line"></span><br><span class="line"><span class="comment"># 其他</span></span><br><span class="line">https://unpkg.com/axios/dist/axios.min.js</span><br><span class="line"><span class="comment"># Vue2开发环境版本，包含了有帮助的命令行警告</span></span><br><span class="line">https://unpkg.com/vue@2.6.14/dist/vue.js</span><br><span class="line"><span class="comment"># Vue2生产环境版本，优化了尺寸和速度</span></span><br><span class="line">https://unpkg.com/vue@2.6.14/dist/vue.min.js</span><br></pre></td></tr></table></figure><p>附：免费开源的公共CDN</p><table><thead><tr><th>名称</th><th>链接</th></tr></thead><tbody><tr><td>jsDelivr</td><td><a href="https://www.jsdelivr.com/">https://www.jsdelivr.com/</a></td></tr><tr><td>unpkg</td><td><a href="https://unpkg.com/">https://unpkg.com/</a></td></tr><tr><td>cdnjs</td><td><a href="https://cdnjs.com/">https://cdnjs.com/</a></td></tr><tr><td>js.org</td><td><a href="https://www.js.org/">https://www.js.org/</a></td></tr></tbody></table><p>国内公共CDN：</p><table><thead><tr><th>名称</th><th>链接</th></tr></thead><tbody><tr><td>elemecdn</td><td><a href="https://npm.elemecdn.com/">https://npm.elemecdn.com/</a></td></tr><tr><td>bootcdn</td><td><a href="https://www.bootcdn.cn/">https://www.bootcdn.cn/</a></td></tr><tr><td>unpkg.com 的国内镜像地址</td><td><a href="https://unpkg.zhimg.com/">https://unpkg.zhimg.com/</a></td></tr><tr><td>staticfile</td><td><a href="https://www.staticfile.org/">https://www.staticfile.org/</a></td></tr></tbody></table><h2 id="常见问题解决方案"><a href="#常见问题解决方案" class="headerlink" title="常见问题解决方案"></a>常见问题解决方案</h2><h3 id="安卓键盘顶起元素的问题"><a href="#安卓键盘顶起元素的问题" class="headerlink" title="安卓键盘顶起元素的问题"></a>安卓键盘顶起元素的问题</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解决提交按钮被安卓键盘顶起</span></span><br><span class="line"><span class="keyword">var</span> formSubmitBtn = $(<span class="string">&#x27;#formSubmitBtn&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> docmHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>;</span><br><span class="line"><span class="keyword">var</span> showHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    showHeight = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span>;</span><br><span class="line">    <span class="keyword">if</span>(docmHeight &gt; showHeight)&#123;</span><br><span class="line">      formSubmitBtn.<span class="title function_">hide</span>();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      formSubmitBtn.<span class="title function_">show</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="H5-显示控制台"><a href="#H5-显示控制台" class="headerlink" title="H5 显示控制台"></a>H5 显示控制台</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vconsole/dist/vconsole.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// VConsole 默认会挂载到 `window.VConsole` 上</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> vConsole = <span class="keyword">new</span> <span class="variable language_">window</span>.<span class="title class_">VConsole</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="H5-页面唤醒支付宝-app-指定页面"><a href="#H5-页面唤醒支付宝-app-指定页面" class="headerlink" title="H5 页面唤醒支付宝 app 指定页面"></a>H5 页面唤醒支付宝 app 指定页面</h3><blockquote><p>原文链接：<a href="https://blog.csdn.net/zhoujibin1025/article/details/109219410">https://blog.csdn.net/zhoujibin1025/article/details/109219410</a></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">alipayqr://platformapi/startapp?saId=10000003 // 手机充值</span><br><span class="line">alipayqr://platformapi/startapp?saId=10000007 // 扫一扫</span><br><span class="line">alipayqr://platformapi/startapp?saId=10000009 // 爱心捐赠</span><br><span class="line">alipayqr://platformapi/startapp?saId=100000011 // 彩票首页</span><br><span class="line">alipayqr://platformapi/startapp?saId=100000033 // 话费卡转让</span><br><span class="line">alipayqr://platformapi/startapp?saId=10000110 // 关于</span><br><span class="line">alipayqr://platformapi/startapp?saId=10000112 // 服务授权</span><br><span class="line">alipayqr://platformapi/startapp?saId=20000116 // 转账</span><br><span class="line">alipayqr://platformapi/startapp?saId=20000056 // 付款码-----210</span><br><span class="line">alipays://platformapi/startapp?appId=20000003 // 账单</span><br><span class="line">alipays://platformapi/startapp?appId=20000076 // 账单</span><br><span class="line">alipays://platformapi/startapp?appId=20000006 // 切换账户</span><br><span class="line">alipays://platformapi/startapp?appId=20000008 // 支付宝登出</span><br><span class="line">alipays://platformapi/startapp?appId=20000009 // 手机号注册</span><br><span class="line">alipays://platformapi/startapp?appId=20000010 // 绑定手机</span><br><span class="line">alipays://platformapi/startapp?appId=20000011 // 客服帮助</span><br><span class="line">alipays://platformapi/startapp?appId=20000013 // 修改支付密码</span><br><span class="line">alipays://platformapi/startapp?appId=20000014 // 我的银行卡</span><br><span class="line">alipays://platformapi/startapp?appId=20000015 // 找回登录密码</span><br><span class="line">alipays://platformapi/startapp?appId=20000017 // 修改登录密码</span><br><span class="line">alipays://platformapi/startapp?appId=20000019 // 余额</span><br><span class="line">alipays://platformapi/startapp?appId=20000020 // 卡包</span><br><span class="line">alipays://platformapi/startapp?appId=20000024 // 支付宝设置</span><br><span class="line">alipays://platformapi/startapp?appId=20000027 // 账号切换</span><br><span class="line">alipays://platformapi/startapp?appId=20000031 // 设置个人头像</span><br><span class="line">alipays://platformapi/startapp?appId=20000032 // 余额宝</span><br><span class="line">alipays://platformapi/startapp?appId=20000033 // 提现</span><br><span class="line">alipays://platformapi/startapp?appId=20000038 // 身份验证</span><br><span class="line">alipays://platformapi/startapp?appId=20000048 // 添加生活好</span><br><span class="line">alipays://platformapi/startapp?appId=20000049 // 意见反馈</span><br><span class="line">alipays://platformapi/startapp?appId=20000050 // 打开地图</span><br><span class="line">alipays://platformapi/startapp?appId=20000057 // 账号管理</span><br><span class="line">alipays://platformapi/startapp?appId=20000068 // 快速挂失</span><br><span class="line">alipays://platformapi/startapp?appId=20000068 // 安全中心</span><br><span class="line">alipays://platformapi/startapp?appId=20000071 // 城市一卡通</span><br><span class="line">alipays://platformapi/startapp?appId=20000078 // 上银汇款</span><br><span class="line">alipays://platformapi/startapp?appId=20000081 // 更多</span><br><span class="line">alipays://platformapi/startapp?appId=20000122 // 首页活动</span><br><span class="line">alipays://platformapi/startapp?appId=20000123 // 收钱</span><br><span class="line">alipayqr://platformapi/startapp?appId=68687017 // 年度账单</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000101 // 生活号</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000102 // 打开nfc</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000107 // 出境</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000108 // 挂号就诊</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000110 // 我的保障</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000115 // 设备管理</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000119 // 阿里游戏</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000118 // 芝麻信用</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000120 // 饿了么</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000123 // 收钱</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000125 // 首页</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000126 // 免费wifi</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000130 // 滴滴</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000132 // 亲情号</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000134 // 股票自选</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000135 // 火车票</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000136 // 游戏充值</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000139 // 酒店搜索</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000141 // 修改昵称</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000142 // 娱乐宝</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000143 // 火车票汽车票预定</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000146 // 我的淘宝</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000150 // 汇率换算</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000153 // 游戏中心</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000155 // 飞猪</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000157 // 国际机票查询</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000160 // 蚂蚁会员</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000161 // 理财小工具</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000162 // 羊城通</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000165 // 定期理财</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000161 // 指纹手势解锁</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000168 // 年度账单</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000176 // 红包</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000183 // 设置手势密码</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000161 // 指纹手势解锁设定界面</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000186 // 通讯录</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000161 // 绑定智能手环</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000197 // 首页-热门游戏</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000199 // 花呗</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000205 // 亲情圈</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000218 // 黄金</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000225 // 借条</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000227 // 卡包</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000234 // 刷脸</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000235 // 服务提醒</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000241 // 车险服务</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000243 // 总资产</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000248 // 个性签名</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000252 // 朋友模块</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000255 // 账户充值</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000266 // 邮箱账单</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000288 // 聊天室</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000290 // 可能认识的人</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000298 // 证书管理</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000301 // 多设备管理</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000305 // 支付宝内付款码声波付</span><br><span class="line">alipayqr://platformapi/startapp?appId=20000307 // 暗号 —400</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 收藏 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue基础介绍</title>
      <link href="/posts/5d04137a/"/>
      <url>/posts/5d04137a/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Vue是一套用于构建用户界面的<strong>渐进式框架</strong></p><p>优点</p><ul><li>学习成本低、轻量级的框架、渐进式框架</li><li>双向数据绑定、组件化开发</li><li>单页面路由、虚拟dom</li><li>数据和结构的分离、运行速度快、插件化</li></ul><p>缺点</p><ul><li>不支持IE8以下</li><li>生态系统可能没有Angular和React那么丰富</li><li>单页面应用，不利于seo优化</li><li>初次加载时耗时多</li></ul><h2 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h2><table><thead><tr><th>指令</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>v-if</td><td>控制元素渲染，值为true重新加载dom, v-else-if和v-else同理</td><td><code>&lt;div v-if=&quot;true&quot;&gt;渲染元素&lt;/div&gt;</code></td></tr><tr><td>v-show</td><td>控制元素显示，值为false相当于css的display:none</td><td><code>&lt;div v-show=&quot;false&quot;&gt;隐藏元素&lt;/div&gt;</code></td></tr><tr><td>v-text</td><td>元素的InnerText属性,用于填充文本</td><td><code>&lt;div v-text=&quot;显示的文本&quot;&gt;&lt;/div&gt;</code></td></tr><tr><td>v-html</td><td>元素的innerHTML属性,用于填充文本或富文本</td><td><code>&lt;div v-html=&quot;html&quot;&gt;&lt;/div&gt;</code>, <code>html</code>在data中声明</td></tr><tr><td>v-model</td><td>双向绑定,视图层修改值时会同步改变数据层的值</td><td><code>&lt;input v-model=&quot;value&quot; /&gt;</code>, <code>value</code>在data中声明</td></tr><tr><td>v-bind</td><td>给元素的属性赋值, <code>v-bind:属性名=&quot;常量/变量名&quot; </code>,简写形式<code>:属性名=&quot;变量名&quot;</code></td><td><code>&lt;img v-bind:src=&quot;imgUrl&quot;/&gt;</code>或 <code>&lt;img :src=&quot;imgUrl&quot;/&gt;</code></td></tr><tr><td>v-on</td><td>自定义事件, <code>v-on:事件名=&quot;表达式/函数名&quot;</code>,简写形式<code>@事件名=&quot;表达式&quot;</code></td><td><code>&lt;div v-on:click=&quot;clickEvent&quot;&gt;&lt;/div&gt;</code>或 <code>&lt;div @click=&quot;clickEvent&quot;&gt;&lt;/div&gt;</code></td></tr></tbody></table><hr><h2 id="计算属性和侦听器"><a href="#计算属性和侦听器" class="headerlink" title="计算属性和侦听器"></a>计算属性和侦听器</h2><h3 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3><p><strong>计算属性是基于它们的响应式依赖进行缓存的</strong>，只在相关响应式依赖发生改变时它们才会重新求值。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Original message: &quot;&#123;&#123; message &#125;&#125;&quot;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Computed reversed message: &quot;&#123;&#123; reversedMessage &#125;&#125;&quot;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="comment">// 计算属性的 getter</span></span><br><span class="line">    <span class="attr">reversedMessage</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// `this` 指向 vm 实例</span></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="侦听器"><a href="#侦听器" class="headerlink" title="侦听器"></a>侦听器</h3><p>当需要在数据变化时执行异步或开销较大的操作时，使用侦听器是最有用的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="keyword">function</span> (<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">doSomething</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">doSomething</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// doSomething</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr><h2 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h2><h3 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 阻止单击事件继续传播 等同于event.stopPropagation() --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.stop</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 提交事件不再重载页面 等同于event.preventDefault() --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">v-on:submit.prevent</span>=<span class="string">&quot;onSubmit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 修饰符可以串联 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.stop.prevent</span>=<span class="string">&quot;doThat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 只有修饰符 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">v-on:submit.prevent</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 添加事件监听器时使用事件捕获模式 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 即内部元素触发的事件先在此处理，然后才交由内部元素进行处理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:click.capture</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 只当在 event.target 是当前元素自身时触发处理函数 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 即事件不是从内部元素触发的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:click.self</span>=<span class="string">&quot;doThat&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 点击事件将只会触发一次 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.once</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 滚动事件的默认行为 (即滚动行为) 将会立即触发 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 而不会等待 `onScroll` 完成  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 这其中包含 `event.preventDefault()` 的情况 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:scroll.passive</span>=<span class="string">&quot;onScroll&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 这个 .passive 修饰符尤其能够提升移动端的性能。 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 不要把 .passive 和 .prevent 一起使用，因为 .prevent 将会被忽略，同时浏览器可能会向你展示一个警告。请记住，.passive 会告诉浏览器你不想阻止事件的默认行为。 --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 只有在 `key` 是 `Enter` 时调用 `vm.submit()` --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup.enter</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 如果要自动过滤用户输入的首尾空白字符，可以给 v-model 添加 trim 修饰符： --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model.trim</span>=<span class="string">&quot;msg&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在“change”时而非“input”时更新 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model.lazy</span>=<span class="string">&quot;msg&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 如果想自动将用户的输入值转为数值类型，可以给 v-model 添加 number 修饰符： --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model.number</span>=<span class="string">&quot;age&quot;</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><table><thead><tr><th>基本生命周期</th><th>说明</th></tr></thead><tbody><tr><td>beforeCreate</td><td>在实例初始化之后，数据观测 (data observer) 和 event&#x2F;watcher 事件配置之前被调用。</td></tr><tr><td>created</td><td>在实例创建完成后被立即调用。在这一步，实例已完成以下的配置：数据观测 (data observer)，property 和方法的运算，watch&#x2F;event 事件回调。然而，挂载阶段还没开始，$el property 目前尚不可用。</td></tr><tr><td>beforeMount</td><td>在挂载开始之前被调用：相关的 render 函数首次被调用。</td></tr><tr><td>mounted</td><td>实例被挂载后调用。</td></tr><tr><td>beforeUpdate</td><td>数据更新时调用。</td></tr><tr><td>updated</td><td>由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。</td></tr><tr><td>beforeDestroy</td><td>实例销毁之前调用。在这一步，实例仍然完全可用。</td></tr><tr><td>destroyed</td><td>实例销毁后调用。该钩子被调用后，对应 Vue 实例的所有指令都被解绑，所有的事件监听器被移除，所有的子实例也都被销毁。</td></tr></tbody></table><table><thead><tr><th>不常用生命周期</th><th>说明</th></tr></thead><tbody><tr><td>activated</td><td>被 keep-alive 缓存的组件激活时调用。</td></tr><tr><td>deactivated</td><td>被 keep-alive 缓存的组件停用时调用。</td></tr><tr><td>errorCaptured</td><td>当捕获一个来自子孙组件的错误时被调用。</td></tr></tbody></table><hr><h2 id="组件传值"><a href="#组件传值" class="headerlink" title="组件传值"></a>组件传值</h2><h3 id="父组件"><a href="#父组件" class="headerlink" title="父组件"></a>父组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Child子组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Child</span> <span class="attr">:msg</span>=<span class="string">&quot;parentMsg&quot;</span> @<span class="attr">toParent</span>=<span class="string">&quot;getMsg&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Child</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">parentMsg</span>: <span class="string">&quot;我是父组件消息&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">childMsg</span>: <span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 子组件事件</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">getMsg</span>(<span class="params">msg</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">childMsg</span> = msg;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="子组件"><a href="#子组件" class="headerlink" title="子组件"></a>子组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>我接受到的父组件的消息是：&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;toParent&quot;</span>&gt;</span>向父组件发送信息<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// props: [&#x27;msg&#x27;],</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// props: &#123;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//   msg: String</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// &#125;,</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">msg</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="string">&#x27;默认值&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">childMsg</span>: <span class="string">&quot;我是子组件消息&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">toParent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;toParent&quot;</span>, <span class="variable language_">this</span>.<span class="property">childMsg</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="兄弟传值"><a href="#兄弟传值" class="headerlink" title="兄弟传值"></a>兄弟传值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$eventBus</span> = <span class="keyword">new</span> <span class="title class_">Vue</span>();</span><br></pre></td></tr></table></figure><p>第一个子组件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toBrother&quot;</span>&gt;</span>兄弟传值<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">msg</span>: <span class="string">&quot;兄弟传值&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">toBrother</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">$eventBus</span>.$emit(<span class="string">&quot;toBrother&quot;</span>, <span class="variable language_">this</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>第二个子组件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>第二个子组件,得到的信息是：&#123;&#123;getMsg&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">getMsg</span>: <span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="property">$eventBus</span>.$on(<span class="string">&quot;toBrother&quot;</span>, <span class="function"><span class="params">msg</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">getMsg</span> = msg;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title function_">store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;helloVueX&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">15</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>:&#123;</span><br><span class="line">    <span class="title function_">nameInfo</span>(<span class="params">state</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;姓名:&quot;</span> + state.<span class="property">name</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">fullInfo</span>(<span class="params">state,getters</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> getters.<span class="property">nameInfo</span> + <span class="string">&#x27;年龄:&#x27;</span> + state.<span class="property">age</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attr">mutations</span>:&#123;</span><br><span class="line">    <span class="title function_">edit</span>(<span class="params">state, payload</span>)&#123;</span><br><span class="line">      state.<span class="property">name</span> = <span class="string">&#x27;jack&#x27;</span></span><br><span class="line">      <span class="comment">// 或接收入参payload（入参为多个参数时payload必须是一个对象）</span></span><br><span class="line">      <span class="comment">// state.name = payload;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>:&#123;</span><br><span class="line">    <span class="title function_">asyncEdit</span>(<span class="params">context,payload</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">          context.<span class="title function_">commit</span>(<span class="string">&#x27;edit&#x27;</span>,payload) <span class="comment">// 调用mutations中的edit</span></span><br><span class="line">          <span class="title function_">resolve</span>()</span><br><span class="line">        &#125;, <span class="number">2000</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><h3 id="挂载"><a href="#挂载" class="headerlink" title="挂载"></a>挂载</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ul><li>state<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;app&#x27;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 组件中使用 --&gt;</span></span><br><span class="line">    name: &#123;&#123; $store.state.name &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mapState, mapMutations, mapActions, mapGetters&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;HelloWorld&#x27;</span>,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">msg</span>: <span class="string">&#x27;Welcome to Your Vue.js App&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="comment">// ...mapGetters(&#123;</span></span><br><span class="line">    <span class="comment">//   // 把 `this.getData` 映射为 `this.$store.getters.fullInfo`</span></span><br><span class="line">    <span class="comment">//   getData: &#x27;fullInfo&#x27;</span></span><br><span class="line">    <span class="comment">// &#125;),</span></span><br><span class="line">    ...<span class="title function_">mapGetters</span>([</span><br><span class="line">      <span class="string">&#x27;fullInfo&#x27;</span>,</span><br><span class="line">    ]),</span><br><span class="line">    <span class="title function_">getData</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>.<span class="property">fullInfo</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="comment">// ...mapMutations(&#123;</span></span><br><span class="line">    <span class="comment">//  editName: &#x27;edit&#x27; // 将 `this.editName()` 映射为 `this.$store.commit(&#x27;edit&#x27;)`</span></span><br><span class="line">    <span class="comment">// &#125;),</span></span><br><span class="line">    <span class="comment">// ...mapActions(&#123;</span></span><br><span class="line">    <span class="comment">//   asyncEditName: &#x27;asyncEdit&#x27;, // 将 `this.asyncEditName()` 映射为 `this.$store.dispatch(&#x27;asyncEdit&#x27;)`</span></span><br><span class="line">    <span class="comment">// &#125;),</span></span><br><span class="line">    ...<span class="title function_">mapMutations</span>([</span><br><span class="line">      <span class="string">&#x27;edit&#x27;</span> <span class="comment">// 将 `this.edit()` 映射为 `this.$store.commit(&#x27;edit&#x27;)`</span></span><br><span class="line">    ]),</span><br><span class="line">    ...<span class="title function_">mapActions</span>([</span><br><span class="line">      <span class="string">&#x27;asyncEdit&#x27;</span> <span class="comment">// 将 `this.asyncEdit()` 映射为 `this.$store.dispatch(&#x27;asyncEdit&#x27;)`</span></span><br><span class="line">    ]),</span><br><span class="line">    <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getGetterName</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>.<span class="property">fullInfo</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">editName</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;edit&#x27;</span>, <span class="string">&#x27;rose&#x27;</span>);</span><br><span class="line">      <span class="comment">// this.$store.commit(&#x27;edit&#x27;, &#123;age:15,name: &#x27;rose&#x27;&#125;);</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">asyncEditName</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;asyncEdit&#x27;</span>, &#123;<span class="attr">age</span>:<span class="number">15</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用 router-link 组件来导航. --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 通过传入 `to` 属性指定链接. --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;router-link&gt; 默认会被渲染成一个 `&lt;a&gt;` 标签 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/foo&quot;</span>&gt;</span>Go to Foo<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 路由出口 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 路由匹配到的组件将渲染在这里 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 定义 (路由) 组件。</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Foo</span> = &#123; <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;foo&lt;/div&gt;&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Bar</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Bar&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 定义路由</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/foo&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Foo</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/bar&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Bar</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 创建 router 实例，然后传 `routes` 配置</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes <span class="comment">// (缩写) 相当于 routes: routes</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 创建和挂载根实例。</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;User&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    <span class="comment">// 动态路径参数 以冒号开头</span></span><br><span class="line">    <span class="comment">// 访问路由为 http://xxx/user/12345</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>, <span class="attr">component</span>: <span class="title class_">User</span> &#125;,</span><br><span class="line">    <span class="comment">// 访问路由为 http://xxx/user/jack/post/12345</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/user/:username/post/:post_id&#x27;</span>, <span class="attr">component</span>: <span class="title class_">User</span> &#125;,</span><br><span class="line">    <span class="comment">// 捕获所有路由</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>, <span class="attr">component</span>: <span class="title class_">User</span> &#125;,</span><br><span class="line">    <span class="comment">// 捕获404 Not found 路由</span></span><br><span class="line">    <span class="comment">// 访问路由如 http://xxx/user-jack</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/user-*&#x27;</span>, <span class="attr">component</span>: <span class="title class_">User</span> &#125;,</span><br><span class="line">    <span class="comment">// 重定向路由</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/a&#x27;</span>, <span class="attr">redirect</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;foo&#x27;</span> &#125;&#125;,</span><br><span class="line">    <span class="comment">// 或</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/a&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/b&#x27;</span> &#125;,</span><br><span class="line">    <span class="comment">// 路由懒加载</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/foo&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./Foo.vue&#x27;</span>) &#125;,</span><br><span class="line">    <span class="comment">// 把某个路由下的所有组件都打包在同个异步块 (chunk) 中</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/foo&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &quot;group-foo&quot; */</span> <span class="string">&#x27;./Foo.vue&#x27;</span>) &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;user&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;h2&gt;User &#123;&#123; $route.params.id &#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">      &lt;router-view&gt;&lt;/router-view&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">User</span>,</span><br><span class="line">      <span class="attr">children</span>: [</span><br><span class="line">        <span class="comment">// 当 /user/:id 匹配成功，</span></span><br><span class="line">        <span class="comment">// UserHome 会被渲染在 User 的 &lt;router-view&gt; 中</span></span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">UserHome</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="comment">// 当 /user/:id/profile 匹配成功，</span></span><br><span class="line">          <span class="comment">// UserProfile 会被渲染在 User 的 &lt;router-view&gt; 中</span></span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;profile&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">UserProfile</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="comment">// 当 /user/:id/posts 匹配成功</span></span><br><span class="line">          <span class="comment">// UserPosts 会被渲染在 User 的 &lt;router-view&gt; 中</span></span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;posts&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">UserPosts</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="路由API"><a href="#路由API" class="headerlink" title="路由API"></a>路由API</h3><h4 id="编程式导航"><a href="#编程式导航" class="headerlink" title="编程式导航"></a>编程式导航</h4><ol><li><p><code>router.push(location, onComplete?, onAbort?)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router.push 等同于 &lt;router-link&gt;</span></span><br><span class="line"><span class="comment">// 字符串</span></span><br><span class="line">router.<span class="title function_">push</span>(<span class="string">&#x27;home&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;home&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 命名的路由</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;user&#x27;</span>, <span class="attr">params</span>: &#123; <span class="attr">userId</span>: <span class="string">&#x27;123&#x27;</span> &#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带查询参数，变成 /register?plan=private</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;register&#x27;</span>, <span class="attr">query</span>: &#123; <span class="attr">plan</span>: <span class="string">&#x27;private&#x27;</span> &#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  如果提供了 path，params 会被忽略 , 你需要提供路由的 name 或手写完整的带有参数的 path</span></span><br><span class="line"><span class="keyword">const</span> userId = <span class="string">&#x27;123&#x27;</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;user&#x27;</span>, <span class="attr">params</span>: &#123; userId &#125;&#125;) <span class="comment">// -&gt; /user/123</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">`/user/<span class="subst">$&#123;userId&#125;</span>`</span> &#125;) <span class="comment">// -&gt; /user/123</span></span><br></pre></td></tr></table></figure></li><li><p><code>router.replace(location, onComplete?, onAbort?)</code><br> 跟 <code>router.push</code> 很像，唯一的不同就是，它不会向 history 添加新记录，而是跟它的方法名一样 —— 替换掉当前的 history 记录。</p></li><li><p><code>router.go(n)</code><br> 这个方法的参数是一个整数，意思是在 history 记录中向前或者后退多少步，类似 window.history.go(n)。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在浏览器记录中前进一步，等同于 history.forward()</span></span><br><span class="line">router.<span class="title function_">go</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 后退一步记录，等同于 history.back()</span></span><br><span class="line">router.<span class="title function_">go</span>(-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 前进 3 步记录</span></span><br><span class="line">router.<span class="title function_">go</span>(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果 history 记录不够用，那就默默地失败呗</span></span><br><span class="line">router.<span class="title function_">go</span>(-<span class="number">100</span>)</span><br><span class="line">router.<span class="title function_">go</span>(<span class="number">100</span>)</span><br></pre></td></tr></table></figure></li></ol><h4 id="导航守卫"><a href="#导航守卫" class="headerlink" title="导航守卫"></a>导航守卫</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123; ... &#125;)</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// to: Route: 即将要进入的目标 路由对象</span></span><br><span class="line">  <span class="comment">// from: Route: 当前导航正要离开的路由</span></span><br><span class="line">  <span class="comment">// next: Function // next() 继续执行路由 next(false)中断当前的导航 next(&#x27;/&#x27;) 或者 next(&#123; path: &#x27;/&#x27; &#125;) 跳转到一个不同的地址</span></span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">name</span> !== <span class="string">&#x27;Login&#x27;</span> &amp;&amp; !<span class="title class_">Token</span>) &#123;</span><br><span class="line">    <span class="title function_">next</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span> &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="组件内的守卫"><a href="#组件内的守卫" class="headerlink" title="组件内的守卫"></a>组件内的守卫</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">beforeRouteUpdate (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">  <span class="comment">// 在当前路由改变，但是该组件被复用时调用</span></span><br><span class="line">  <span class="comment">// 如在 /foo/1 和 /foo/2 之间跳转的时候，由于会渲染同样的 Foo 组件，此时被调用</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = to.<span class="property">params</span>.<span class="property">name</span></span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">beforeRouteLeave</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) &#123;</span><br><span class="line">  <span class="comment">// 导航离开该组件的对应路由时调用</span></span><br><span class="line">  <span class="comment">// 可以访问组件实例 `this`</span></span><br><span class="line">  <span class="keyword">const</span> answer = <span class="variable language_">window</span>.<span class="title function_">confirm</span>(<span class="string">&#x27;Do you really want to leave? you have unsaved changes!&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (answer) &#123;</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">next</span>(<span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="常见bug"><a href="#常见bug" class="headerlink" title="常见bug"></a>常见bug</h2><ol><li><p>打包后白屏</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Refused to apply style from &#x27;http://127.0.0.1:5500/public/assets/css/app.css&#x27; because its MIME type (&#x27;text/html&#x27;) is not a supported stylesheet MIME type, and strict MIME checking is enabled.</span><br></pre></td></tr></table></figure> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js中添加</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">publicPath</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;./&#x27;</span> : <span class="string">&#x27;./&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>子组件改变父组件的数据，父组件元素绑定的值不更新</p><ul><li>使用 <code>$forceupdate()</code></li><li>使用<code>$emit(&#39;update:value&#39;,newValue)</code></li><li>在父组件methods中改变，子组件触发父组件中的方法</li></ul></li><li><p>v-for绑定的数据更新，视图不更新</p><ul><li><p>原因：由于 JavaScript 的限制， Vue 不能检测以下变动的数组：</p></li><li><p>当你利用索引直接设置一个项时，例如： vm.items[indexOfItem] &#x3D; newValue</p></li><li><p>当你修改数组的长度时，例如： vm.items.length &#x3D; newLength</p></li><li><p>解决办法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property">setVue</span>.<span class="title function_">set</span>(example1.<span class="property">items</span>, indexOfItem, newValue) </span><br><span class="line">或 example1.<span class="property">items</span>.<span class="title function_">splice</span>(indexOfItem, <span class="number">1</span>, newValue)</span><br><span class="line">example1.<span class="property">items</span>.<span class="title function_">splice</span>(newLength)</span><br></pre></td></tr></table></figure></li><li><p>使用了前两种方法依旧不更新视图<br>包裹一层标签,并使用<code>v-if</code>或<code>v-show</code>操作</p></li></ul></li><li><p>修改data数据后视图层没有同步更新</p><p> 使用</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">username</span> = <span class="string">&#x27;jack&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><hr><div class="note primary flat"><p>如果有任何建议或者补充，欢迎在下方评论区留言！</p></div>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微信小程序之日期时间控件picker</title>
      <link href="/posts/3df9657d/"/>
      <url>/posts/3df9657d/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/caijt/p/11843552.html">原文</a></p><blockquote><p>在原文代码基础上做了部分修改</p><ol><li>增加默认显示当前日期时间</li><li>增加有效年份范围和时间范围的开始</li><li>增加结果是否显示秒</li></ol></blockquote><span id="more"></span><ul><li><p><code>date-time-picker.wxml</code>文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--components/date-time-picker/date-time-picker.wxml--&gt;</span><br><span class="line">&lt;picker mode=&quot;multiSelector&quot; value=&quot;&#123;&#123;valueArray&#125;&#125;&quot; range=&quot;&#123;&#123;rangeValues&#125;&#125;&quot; bindcolumnchange=&quot;handleColumnChange&quot; bindchange=&quot;handleValueChange&quot; bindcancel=&quot;handleCancel&quot;&gt;</span><br><span class="line">  &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">&lt;/picker&gt;</span><br></pre></td></tr></table></figure></li><li><p><code>date-time-picker.js</code>文件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/date-time-picker/date-time-picker.js</span></span><br><span class="line"><span class="keyword">const</span> leftPad0 = <span class="keyword">function</span> (<span class="params">v, n = <span class="number">2</span></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!v) &#123;</span><br><span class="line">    v = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> prefix = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    prefix += <span class="string">&quot;0&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (prefix + v).<span class="title function_">substr</span>(-n);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> stringToDate = <span class="keyword">function</span> (<span class="params">str</span>) &#123;</span><br><span class="line">  str = str.<span class="title function_">replace</span>(<span class="regexp">/-/g</span>, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>(str);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> isLeapYear = <span class="keyword">function</span> (<span class="params">year</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (((year % <span class="number">4</span>) == <span class="number">0</span>) &amp;&amp; ((year % <span class="number">100</span>) != <span class="number">0</span>) || ((year % <span class="number">400</span>) == <span class="number">0</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">let</span> years = [];</span><br><span class="line"><span class="keyword">const</span> beginYear = <span class="number">1990</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = beginYear; i &lt;= now.<span class="title function_">getFullYear</span>(); i++) &#123;</span><br><span class="line">  years.<span class="title function_">push</span>(i + <span class="string">&quot;年&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> months = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">12</span>; i++) &#123;</span><br><span class="line">  months.<span class="title function_">push</span>(<span class="title function_">leftPad0</span>(i + <span class="number">1</span>, <span class="number">2</span>) + <span class="string">&quot;月&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> days = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">31</span>; i++) &#123;</span><br><span class="line">  days.<span class="title function_">push</span>(<span class="title function_">leftPad0</span>(i + <span class="number">1</span>, <span class="number">2</span>) + <span class="string">&quot;日&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> hours = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">24</span>; i++) &#123;</span><br><span class="line">  hours.<span class="title function_">push</span>(<span class="title function_">leftPad0</span>(i, <span class="number">2</span>) + <span class="string">&quot;时&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> minutes = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">60</span>; i++) &#123;</span><br><span class="line">  minutes.<span class="title function_">push</span>(<span class="title function_">leftPad0</span>(i, <span class="number">2</span>) + <span class="string">&quot;分&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的属性列表</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">properties</span>: &#123;</span><br><span class="line">    <span class="comment">// 值，字符串格式为&quot;YYYY-MM-DD hh:mm:ss&quot;</span></span><br><span class="line">    <span class="attr">value</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 值，字符串格式为&quot;YYYY/MM/DD hh:mm:ss&quot;</span></span><br><span class="line">    <span class="attr">dateValue</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Date</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 有效年份范围的开始，字符串格式为&quot;YYYY&quot;, 本年传&quot;now&quot;</span></span><br><span class="line">    <span class="attr">startYear</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">      <span class="attr">value</span>: beginYear</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 有效时间范围的开始，字符串格式为&quot;hh:mm&quot;</span></span><br><span class="line">    <span class="attr">startTime</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">      <span class="attr">value</span>: <span class="string">&quot;00:00&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 结果显示秒</span></span><br><span class="line">    <span class="attr">showSecond</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">      <span class="attr">value</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 显示当前时间</span></span><br><span class="line">    <span class="attr">showNow</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">      <span class="attr">value</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">valueArray</span>: [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">    <span class="attr">rangeValues</span>: [</span><br><span class="line">      years,</span><br><span class="line">      months,</span><br><span class="line">      days,</span><br><span class="line">      hours,</span><br><span class="line">      minutes</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">pickerYear</span>: beginYear,</span><br><span class="line">    <span class="attr">pickerMonth</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">observers</span>: &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="keyword">function</span> (<span class="params">v</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span>(!v &amp;&amp; <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">showNow</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        v = <span class="string">`<span class="subst">$&#123;now.getFullYear()&#125;</span>-<span class="subst">$&#123;leftPad0(now.getMonth()+<span class="number">1</span>)&#125;</span>-<span class="subst">$&#123;leftPad0(now.getDate())&#125;</span> <span class="subst">$&#123;leftPad0(now.getHours())&#125;</span>:<span class="subst">$&#123;leftPad0(now.getMinutes())&#125;</span>`</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">valueArray</span>: <span class="variable language_">this</span>.<span class="title function_">_dateToValueArray</span>(<span class="title function_">stringToDate</span>(v))</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">dateValue</span>: <span class="keyword">function</span> (<span class="params">date</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">valueArray</span>: <span class="variable language_">this</span>.<span class="title function_">_dateToValueArray</span>(date)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">valueArray</span>: <span class="keyword">function</span> (<span class="params">v</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">_settMonthDays</span>(v[<span class="number">0</span>] + beginYear, v[<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">ready</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">init</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的方法列表</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> nowYear = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getFullYear</span>();</span><br><span class="line">      <span class="keyword">const</span> startYears = (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">startYear</span> === <span class="string">&quot;now&quot;</span> ? nowYear : <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">startYear</span>) + <span class="string">&quot;年&quot;</span>;</span><br><span class="line">      <span class="keyword">const</span> startTimeArr = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">startTime</span>.<span class="title function_">split</span>(<span class="string">&#x27;:&#x27;</span>);</span><br><span class="line">      <span class="keyword">const</span> startHours = startTimeArr[<span class="number">0</span>] + <span class="string">&quot;时&quot;</span>;</span><br><span class="line">      <span class="keyword">const</span> startMinutes = startTimeArr[<span class="number">1</span>] + <span class="string">&quot;分&quot;</span>;</span><br><span class="line">      years = years.<span class="title function_">slice</span>(years.<span class="title function_">indexOf</span>(startYears));</span><br><span class="line">      hours = hours.<span class="title function_">slice</span>(hours.<span class="title function_">indexOf</span>(startHours));</span><br><span class="line">      minutes = minutes.<span class="title function_">slice</span>(minutes.<span class="title function_">indexOf</span>(startMinutes));</span><br><span class="line">      <span class="keyword">const</span> rangeValues = [</span><br><span class="line">        years,</span><br><span class="line">        months,</span><br><span class="line">        days,</span><br><span class="line">        hours,</span><br><span class="line">        minutes</span><br><span class="line">      ];</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        rangeValues</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">_dateToValueArray</span>(<span class="params">date</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> [date.<span class="title function_">getFullYear</span>() - beginYear, date.<span class="title function_">getMonth</span>(), date.<span class="title function_">getDate</span>() - <span class="number">1</span>, date.<span class="title function_">getHours</span>(), date.<span class="title function_">getMinutes</span>()];</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">_settMonthDays</span>(<span class="params">year, month</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> monthDays = <span class="number">31</span>;</span><br><span class="line">      <span class="keyword">switch</span> (month) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">          monthDays = <span class="number">28</span>;</span><br><span class="line">          <span class="keyword">if</span> (<span class="title function_">isLeapYear</span>(year)) &#123;</span><br><span class="line">            monthDays = <span class="number">29</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">          monthDays = <span class="number">30</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">let</span> days = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; monthDays; i++) &#123;</span><br><span class="line">        days.<span class="title function_">push</span>(<span class="title function_">leftPad0</span>(i + <span class="number">1</span>, <span class="number">2</span>) + <span class="string">&quot;日&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">pickerYear</span>: year,</span><br><span class="line">        <span class="attr">pickerMonth</span>: month,</span><br><span class="line">        <span class="string">&quot;rangeValues[2]&quot;</span>: days</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">handleCancel</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">valueArray</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">valueArray</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">handleColumnChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (e.<span class="property">detail</span>.<span class="property">column</span> &gt; <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">let</span> year = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">pickerYear</span>;</span><br><span class="line">      <span class="keyword">let</span> month = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">pickerMonth</span>;</span><br><span class="line">      <span class="keyword">if</span> (e.<span class="property">detail</span>.<span class="property">column</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        year = e.<span class="property">detail</span>.<span class="property">value</span> + beginYear;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.<span class="property">detail</span>.<span class="property">column</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        month = e.<span class="property">detail</span>.<span class="property">value</span> + <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">_settMonthDays</span>(year, month);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">handleValueChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> dateArr = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> e.<span class="property">detail</span>.<span class="property">value</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> v = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">rangeValues</span>[i][e.<span class="property">detail</span>.<span class="property">value</span>[i]];</span><br><span class="line">        dateArr.<span class="title function_">push</span>(v.<span class="title function_">toString</span>().<span class="title function_">substr</span>(<span class="number">0</span>, v.<span class="property">length</span> - <span class="number">1</span>))</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">let</span> dateString = dateArr[<span class="number">0</span>] + <span class="string">&quot;-&quot;</span> + dateArr[<span class="number">1</span>] + <span class="string">&quot;-&quot;</span> + dateArr[<span class="number">2</span>] + <span class="string">&quot; &quot;</span> + dateArr[<span class="number">3</span>] + <span class="string">&quot;:&quot;</span> + dateArr[<span class="number">4</span>];</span><br><span class="line">      dateString = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">showSecond</span> &amp;&amp; dateString + <span class="string">&quot;:00&quot;</span> || dateString;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&#x27;change&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">date</span>: <span class="title function_">stringToDate</span>(dateString),</span><br><span class="line">        <span class="attr">value</span>: dateString</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">//test.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;usingComponents&quot;: &#123;</span><br><span class="line">    &quot;date-time-picker&quot;: &quot;/components/date-time-picker2/date-time-picker&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//test.wxml</span><br><span class="line">&lt;date-time-picker startYear=&quot;now&quot; value=&quot;&#123;&#123;value&#125;&#125;&quot; bind:change=&quot;handleChange&quot;&gt;时间：&#123;&#123;value&#125;&#125;&lt;/date-time-picker&gt;</span><br><span class="line"></span><br><span class="line">//test.js</span><br><span class="line">Page(&#123;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 页面的初始数据</span><br><span class="line">   */</span><br><span class="line">  data: &#123;</span><br><span class="line">    value: &quot;2019-11-11 11:11:00&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  handleChange(e) &#123;</span><br><span class="line">    console.log(e)</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      value: e.detail.value</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>效果<br><img src="https://img2018.cnblogs.com/common/648126/201911/648126-20191112173034163-1740031446.gif" alt="img"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
            <tag> 组件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微信小程序使用技巧</title>
      <link href="/posts/313ed4c4/"/>
      <url>/posts/313ed4c4/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="微信小程序返回上一页面传参"><a href="#微信小程序返回上一页面传参" class="headerlink" title="微信小程序返回上一页面传参"></a>微信小程序返回上一页面传参</h2><ol><li>方式一，直接调用上一页设置 data  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pages = <span class="title function_">getCurrentPages</span>(); <span class="comment">// 当前页</span></span><br><span class="line"><span class="keyword">let</span> prevPage = pages[pages.<span class="property">length</span> - <span class="number">2</span>]; <span class="comment">// 上一页</span></span><br><span class="line">prevPage.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="attr">subPageResult</span>: <span class="string">&quot;我是结果&quot;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 返回</span></span><br><span class="line">wx.<span class="title function_">navigateBack</span>(&#123;</span><br><span class="line">  <span class="attr">delta</span>: <span class="number">1</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li>方式二，使用 wxStorage  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PageB</span></span><br><span class="line">wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;mydata&#x27;</span>);</span><br><span class="line">wx.<span class="title function_">navigateBack</span>(&#123;</span><br><span class="line">  <span class="attr">delta</span>: <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// PageA</span></span><br><span class="line"><span class="title function_">onShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> mydata = wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;mydata&#x27;</span>);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">mydata</span>: mydata</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微信开发者工具使用scss，超级小白教程</title>
      <link href="/posts/11dbd7e2/"/>
      <url>/posts/11dbd7e2/</url>
      
        <content type="html"><![CDATA[<p>微信开发者工具 使用 scss 超级小白教程</p><p><a href="https://developers.weixin.qq.com/community/develop/article/doc/000462bf504f38031fdba22de56413" title="微信开放社区-微信开发者工具使用scss">原文来自微信开放社区</a></p><span id="more"></span><h2 id="微信开发者工具可以使用扩展安装-vscode-插件"><a href="#微信开发者工具可以使用扩展安装-vscode-插件" class="headerlink" title="微信开发者工具可以使用扩展安装 vscode 插件"></a>微信开发者工具可以使用扩展安装 vscode 插件</h2><ol><li>在 vscode 上先安装 easysass 插件</li><li>找到插件安装包，默认位置：<code>C:\Users\ 你的用户名\.vscode\extensions</code></li><li>打开微信开发者工具，找到 设置–扩展设置–编辑器自定义扩展</li><li>点击打开扩展文件夹，打开微信开发者工具插件安装文件夹<br>  <img src="http://mmbiz.qpic.cn/mmbiz_png/eSN50Z5Cgm2ACh9p5AjO0exOJI2rbWCEOqxZ0xKewHn2uqGPcIFbF2IcAMBVamNSWzPQkgfCQdCO9qnXyY1OWA/0?wx_fmt=png" alt="微信开发者工具拓展" title="图1"></li><li>复制 vscode easysass 插件安装包至微信开发者工具插件安装文件夹下<br>  <img src="http://mmbiz.qpic.cn/mmbiz_png/eSN50Z5Cgm2ACh9p5AjO0exOJI2rbWCEERhl54lJLeOmv644BcOibdlgswqmuXlicdIG38UHYGtHpuGurg0iaHzrg/0?wx_fmt=png" alt="插件安装" title="图2"></li><li>进入安装包修改 package.json 搜索 easysass.formats 把.css 改成.wxss 保存<br>  <img src="http://mmbiz.qpic.cn/mmbiz_png/eSN50Z5Cgm2ACh9p5AjO0exOJI2rbWCExZt250JXOVZhsxzTbeSjmiaPXaTM4OicibGBA4pRumdxDnn7HTgQVyy2A/0?wx_fmt=png" alt="修改package.json" title="图3"></li><li>重启微信开发者工具</li><li>再次打开 设置–扩展设置–编辑器自定义扩展 然后启用插件 再次重启微信开发者工具就可以使用 scss 了<br>  <img src="http://mmbiz.qpic.cn/mmbiz_png/eSN50Z5Cgm2ACh9p5AjO0exOJI2rbWCEsdXNGyP1kVfbCBG251viaSYUVVgHH3F8sz53MJyag9AJCW07layZzCQ/0?wx_fmt=png" alt="启用插件" title="图4"></li></ol>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文档</title>
      <link href="/posts/abbd6e6/"/>
      <url>/posts/abbd6e6/</url>
      
        <content type="html"><![CDATA[<blockquote><p>最新内容请查看 <a href="https://butterfly.js.org/posts/dc584b87">Butterfly 文档(二) 主题页面</a> 与 <a href="https://butterfly.js.org/posts/ceeb73f/">Butterfly 文档(四) 标签外挂</a></p></blockquote><h2 id="Front-matter"><a href="#Front-matter" class="headerlink" title="Front-matter"></a>Front-matter</h2><p>Front-matter 是档案最上方以 <code>---</code> 分隔的区域，用于指定个別档案的变数。</p><div class="note info flat"><p>如果标注<code>可选</code>的参數，可根据自己需要添加，不用全部都写在 markdown 里</p></div><h3 id="Page-Front-matter"><a href="#Page-Front-matter" class="headerlink" title="Page Front-matter"></a>Page Front-matter</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">type:</span><br><span class="line">comments:</span><br><span class="line">description:</span><br><span class="line">keywords:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">mathjax:</span></span><br><span class="line"><span class="emphasis">katex:</span></span><br><span class="line"><span class="emphasis">aside:</span></span><br><span class="line"><span class="emphasis">aplayer:</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:</span><br><span class="line">random:</span><br><span class="line">limit:</span><br><span class="line">  type:</span><br><span class="line"><span class="section">  value:</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>寫法</th><th>类型</th><th>解釋</th></tr></thead><tbody><tr><td>title</td><td>String</td><td>【必需】页面标题</td></tr><tr><td>date</td><td>Date</td><td>【必需】页面创建日期</td></tr><tr><td>type</td><td>String</td><td>【必需】标签、分类和友情链接三个页面需要配置</td></tr><tr><td>updated</td><td>Date</td><td>【可选】页面更新日期</td></tr><tr><td>description</td><td>String</td><td>【可选】页面描述</td></tr><tr><td>keywords</td><td>String</td><td>【可选】页面关键字</td></tr><tr><td>comments</td><td>Boolean</td><td>【可选】显示页面评论模块(默认 true)</td></tr><tr><td>top_img</td><td>Boolean</td><td>【可选】页面顶部图片</td></tr><tr><td>mathjax</td><td>Boolean</td><td>【可选】显示 mathjax(当设置 mathjax 的 per_page: false 时，才需要配置，默认 false)</td></tr><tr><td>katex</td><td>Boolean</td><td>【可选】显示 katex(当设置 katex 的 per_page: false 时，才需要配置，默认 false)</td></tr><tr><td>aside</td><td>Boolean</td><td>【可选】显示侧边栏 (默认 true)</td></tr><tr><td>aplayer</td><td>Boolean</td><td>【可选】在需要的页面加载 aplayer 的 js 和 css,请参考文章下面的 <code>音樂</code> 配置</td></tr><tr><td>highlight_shrink</td><td>Boolean</td><td>【可选】配置代码框是否展开(true&#x2F;false)(默认为设置中 highlight_shrink 的配置)</td></tr><tr><td>random</td><td>Boolean</td><td>【可选】配置友情链接是否随机排序（默认为 false）</td></tr><tr><td>limit</td><td>Number</td><td>【可选】配置説説显示数量</td></tr><tr><td>limit.type</td><td>String</td><td>【可选】配置説説显示数量的类型 （date 或者 num）</td></tr><tr><td>limit.value</td><td>Number</td><td>【可选】配置説説显示数量的值</td></tr></tbody></table><h3 id="Post-Front-matter"><a href="#Post-Front-matter" class="headerlink" title="Post Front-matter"></a>Post Front-matter</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">keywords:</span><br><span class="line">description:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">comments:</span></span><br><span class="line"><span class="emphasis">cover:</span></span><br><span class="line"><span class="emphasis">toc:</span></span><br><span class="line"><span class="emphasis">toc_</span>number:</span><br><span class="line">toc<span class="emphasis">_style_</span>simple:</span><br><span class="line">copyright:</span><br><span class="line">copyright<span class="emphasis">_author:</span></span><br><span class="line"><span class="emphasis">copyright_</span>author<span class="emphasis">_href:</span></span><br><span class="line"><span class="emphasis">copyright_</span>url:</span><br><span class="line">copyright<span class="emphasis">_info:</span></span><br><span class="line"><span class="emphasis">mathjax:</span></span><br><span class="line"><span class="emphasis">katex:</span></span><br><span class="line"><span class="emphasis">aplayer:</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:</span><br><span class="line">aside:</span><br><span class="line">abcjs:</span><br><span class="line"><span class="section">noticeOutdate:</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">寫法</th><th>解釋</th></tr></thead><tbody><tr><td align="left">title</td><td>【必需】文章标题</td></tr><tr><td align="left">date</td><td>【必需】文章创建日期</td></tr><tr><td align="left">updated</td><td>【可选】文章更新日期</td></tr><tr><td align="left">tags</td><td>【可选】文章标签</td></tr><tr><td align="left">categories</td><td>【可选】文章分类</td></tr><tr><td align="left">keywords</td><td>【可选】文章关键字</td></tr><tr><td align="left">description</td><td>【可选】文章描述</td></tr><tr><td align="left">top_img</td><td>【可选】文章頂部图片</td></tr><tr><td align="left">cover</td><td>【可选】文章缩略图(如果没有设置 top_img,文章页顶部将显示缩略图，可设为 false&#x2F;图片地址&#x2F;留空)</td></tr><tr><td align="left">comments</td><td>【可选】显示文章评论模块(默认 true)</td></tr><tr><td align="left">toc</td><td>【可选】显示文章 TOC(默认为设置中 toc 的 enable 配置)</td></tr><tr><td align="left">toc_number</td><td>【可选】显示 toc_number(默认为设置中 toc 的 number 配置)</td></tr><tr><td align="left">toc_style_simple</td><td>【可选】显示 toc 简洁模式</td></tr><tr><td align="left">copyright</td><td>【可选】显示文章版权模块(默认为设置中 post_copyright 的 enable 配置)</td></tr><tr><td align="left">copyright_author</td><td>【可选】文章版权模块的<code>文章作者</code></td></tr><tr><td align="left">copyright_author_href</td><td>【可选】文章版权模块的<code>文章作者</code>链接</td></tr><tr><td align="left">copyright_url</td><td>【可选】文章版权模块的<code>文章链接</code>链接</td></tr><tr><td align="left">copyright_info</td><td>【可选】文章版权模块的<code>版权声明</code>文字</td></tr><tr><td align="left">mathjax</td><td>【可选】显示 mathjax(当设置 mathjax 的 per_page: false 时，才需要配置，默认 false)</td></tr><tr><td align="left">katex</td><td>【可选】显示 katex(当设置 katex 的 per_page: false 时，才需要配置，默认 false)</td></tr><tr><td align="left">aplayer</td><td>【可选】在需要的页面加载 aplayer 的 js 和 css,请参考文章下面的<code>音乐</code> 配置</td></tr><tr><td align="left">highlight_shrink</td><td>【可选】配置代码框是否展开(true&#x2F;false)(默认为设置中 highlight_shrink 的配置)</td></tr><tr><td align="left">aside</td><td>【可选】显示侧边栏 (默认 true)</td></tr><tr><td align="left">abcjs</td><td>【可选】加载 abcjs (当设置 abcjs 的 per_page: false 时，才需要配置，默认 false )</td></tr><tr><td align="left">noticeOutdate</td><td>【可选】文章过期提醒 (默认为设置中 noticeOutdate 的 enable 配置)</td></tr></tbody></table><h2 id="标签外挂（Tag-Plugins）"><a href="#标签外挂（Tag-Plugins）" class="headerlink" title="标签外挂（Tag Plugins）"></a>标签外挂（Tag Plugins）</h2><div class="note info flat"><p>標籤外掛是Hexo獨有的功能，並不是標準的Markdown格式。</p><p>以下的寫法，只適用於Butterfly主題，用在其它主題上不會有效果，甚至可能會報錯。使用前請留意</p></div><div class="note warning flat"><p>標籤外掛雖然能為主題帶來一些額外的功能和UI方面的強化，但是，標籤外掛也有明顯的限制，使用時請留意。</p></div><h3 id="Note-Bootstrap-Callout"><a href="#Note-Bootstrap-Callout" class="headerlink" title="Note (Bootstrap Callout)"></a>Note (Bootstrap Callout)</h3><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">通用設置</button><button type="button" class="tab">用法 1</button><button type="button" class="tab">用法 2（自定義 icon）</button></div><div class="tab-contents"><div class="tab-item-content active"><p>移植於next主題，並進行修改。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">note:</span></span><br><span class="line">  <span class="comment"># Note tag style values:</span></span><br><span class="line">  <span class="comment">#  - simple    bs-callout old alert style. Default.</span></span><br><span class="line">  <span class="comment">#  - modern    bs-callout new (v2-v3) alert style.</span></span><br><span class="line">  <span class="comment">#  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span></span><br><span class="line">  <span class="comment">#  - disabled  disable all CSS styles import of note tag.</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">simple</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">border_radius:</span> <span class="number">3</span></span><br><span class="line">  <span class="comment"># Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line">  <span class="comment"># Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line">  <span class="attr">light_bg_offset:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><p><code>icons</code>和<code>light_bg_offset</code>只對<em>方法一</em>生效</p><p>Note 標籤外掛有兩種用法</p></div><div class="tab-item-content"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>名稱</th><th>用法</th></tr></thead><tbody><tr><td>class</td><td>【可選】標識，不同的標識有不同的配色<br>（ default &#x2F; primary &#x2F; success &#x2F; info &#x2F; warning &#x2F; danger ）</td></tr><tr><td>no-icon</td><td>【可選】不顯示 icon</td></tr><tr><td>style</td><td>【可選】可以覆蓋配置中的 style <br>（simple&#x2F;modern&#x2F;flat&#x2F;disabled）</td></tr></tbody></table><blockquote><p>simple</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note simple %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note simple"><p>默認 提示塊標籤</p></div><div class="note default simple"><p>default 提示塊標籤</p></div><div class="note primary simple"><p>primary 提示塊標籤</p></div><div class="note success simple"><p>success 提示塊標籤</p></div><div class="note info simple"><p>info 提示塊標籤</p></div><div class="note warning simple"><p>warning 提示塊標籤</p></div><div class="note danger simple"><p>danger 提示塊標籤</p></div><blockquote><p>modern</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note modern %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default modern %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary modern %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success modern %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info modern %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning modern %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger modern %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note modern"><p>默認 提示塊標籤</p></div><div class="note default modern"><p>default 提示塊標籤</p></div><div class="note primary modern"><p>primary 提示塊標籤</p></div><div class="note success modern"><p>success 提示塊標籤</p></div><div class="note info modern"><p>info 提示塊標籤</p></div><div class="note warning modern"><p>warning 提示塊標籤</p></div><div class="note danger modern"><p>danger 提示塊標籤</p></div><blockquote><p>flat</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note flat %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note flat"><p>默認 提示塊標籤</p></div><div class="note default flat"><p>default 提示塊標籤</p></div><div class="note primary flat"><p>primary 提示塊標籤</p></div><div class="note success flat"><p>success 提示塊標籤</p></div><div class="note info flat"><p>info 提示塊標籤</p></div><div class="note warning flat"><p>warning 提示塊標籤</p></div><div class="note danger flat"><p>danger 提示塊標籤</p></div><blockquote><p>disabled</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note disabled %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default disabled %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary disabled %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success disabled %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info disabled %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning disabled %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger disabled %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note disabled"><p>默認 提示塊標籤</p></div><div class="note default disabled"><p>default 提示塊標籤</p></div><div class="note primary disabled"><p>primary 提示塊標籤</p></div><div class="note success disabled"><p>success 提示塊標籤</p></div><div class="note info disabled"><p>info 提示塊標籤</p></div><div class="note warning disabled"><p>warning 提示塊標籤</p></div><div class="note danger disabled"><p>danger 提示塊標籤</p></div><blockquote><p>no-icon</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note no-icon flat"><p>默認 提示塊標籤</p></div><div class="note default no-icon flat"><p>default 提示塊標籤</p></div><div class="note primary no-icon flat"><p>primary 提示塊標籤</p></div><div class="note success no-icon flat"><p>success 提示塊標籤</p></div><div class="note info no-icon flat"><p>info 提示塊標籤</p></div><div class="note warning no-icon flat"><p>warning 提示塊標籤</p></div><div class="note danger no-icon flat"><p>danger 提示塊標籤</p></div></div><div class="tab-item-content"><blockquote><p>3.2.0 以上版本支</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note [color] [icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>名稱</th><th>用法</th></tr></thead><tbody><tr><td>color</td><td>【可選】顔色 <br>(default &#x2F; blue &#x2F; pink &#x2F; red &#x2F; purple &#x2F; orange &#x2F; green)</td></tr><tr><td>icon</td><td>【可選】可配置自定義 icon (只支持 fontawesome 圖標, 也可以配置 no-icon )</td></tr><tr><td>style</td><td>【可選】可以覆蓋配置中的 style<br/>（simple&#x2F;modern&#x2F;flat&#x2F;disabled）</td></tr></tbody></table><blockquote><p>simple</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p></div><blockquote><p>modern</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding modern"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p></div><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p></div><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p></div><div class="note green icon-padding modern"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p></div><blockquote><p>flat</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p></div><blockquote><p>disabled</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding disabled"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue icon-padding disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding disabled"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p></div><div class="note red icon-padding disabled"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p></div><div class="note orange icon-padding disabled"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p></div><div class="note green icon-padding disabled"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p></div><blockquote><p>no-icon</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue no-icon %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink no-icon %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red no-icon %&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange no-icon %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple no-icon %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green no-icon %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note no-icon flat"><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue no-icon flat"><p>2021年快到了….</p></div><div class="note pink no-icon flat"><p>小心開車 安全至上</p></div><div class="note red no-icon flat"><p>這是三片呢？還是四片？</p></div><div class="note orange no-icon flat"><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple no-icon flat"><p>剪刀石頭布</p></div><div class="note green no-icon flat"><p>前端最討厭的瀏覽器</p></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>]]></content>
      
      
      <categories>
          
          <category> 文档教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Site </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网址收藏</title>
      <link href="/posts/b19e4cc2/"/>
      <url>/posts/b19e4cc2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>转载自<strong>youthlql</strong>的文章原文 <a href="https://imlql.cn/post/89e81850.html">Youth的时光录-网址收藏</a></p></blockquote><h1 id="壁纸"><a href="#壁纸" class="headerlink" title="壁纸"></a>壁纸</h1><blockquote><p>1、壁纸质量分为: 完美 &gt; 好 &gt; 良好 &gt; 一般<br>2、如果有些壁纸网站打不开,或者打开很慢,这个时候就需要科学上网了（你懂的）</p></blockquote><h2 id="Wallpaper-Engine"><a href="#Wallpaper-Engine" class="headerlink" title="Wallpaper Engine"></a>Wallpaper Engine</h2><p>官网: Steam上的一个18块钱的壁纸软件<br>类型: 全能无敌<br>质量: 完美</p><blockquote><p>此软件配合小黑盒软件的wallpaper分享专区,贴吧分享区等等就是全能的存在。你要你找,这款软件可以满足你99%的需求</p></blockquote><h2 id="彼岸图网"><a href="#彼岸图网" class="headerlink" title="彼岸图网"></a>彼岸图网</h2><p>官网: <a href="http://pic.netbian.com/">http://pic.netbian.com/</a><br>类型: 4K题材; 动漫,二次元类型质量好<br>质量: 好</p><h2 id="千叶网"><a href="#千叶网" class="headerlink" title="千叶网"></a>千叶网</h2><p>官网: <a href="http://qianye88.com/">http://qianye88.com</a><br>类型: 风格多,以4K为主<br>质量: 好</p><h2 id="Foodiesfeed"><a href="#Foodiesfeed" class="headerlink" title="Foodiesfeed"></a>Foodiesfeed</h2><p>官网: <a href="https://www.foodiesfeed.com/">https://www.foodiesfeed.com/</a><br>类型: 美食<br>质量: 好</p><h2 id="P站"><a href="#P站" class="headerlink" title="P站"></a>P站</h2><blockquote><p>不知道是被封了还是在升级,科学上网也进不了</p></blockquote><p>官网: <a href="https://pixivic.com/">https://pixivic.com</a><br>类型: 风格多<br>质量: 好</p><h2 id="画师通-可以当做P站国内版"><a href="#画师通-可以当做P站国内版" class="headerlink" title="画师通(可以当做P站国内版)"></a>画师通(可以当做P站国内版)</h2><p>官网: <a href="https://www.huashi6.com/">https://www.huashi6.com</a><br>类型: 二次元<br>质量: 好</p><h2 id="极简壁纸"><a href="#极简壁纸" class="headerlink" title="极简壁纸"></a>极简壁纸</h2><p>官网: <a href="https://bz.zzzmh.cn/">https://bz.zzzmh.cn</a><br>类型: 二次元,动漫<br>质量: 良好</p><h2 id="必应壁纸"><a href="#必应壁纸" class="headerlink" title="必应壁纸"></a>必应壁纸</h2><p>官网: <a href="https://bing.ioliu.cn/">https://bing.ioliu.cn</a><br>类型: 风景,摄影<br>质量: 良好</p><h2 id="Wallhaven"><a href="#Wallhaven" class="headerlink" title="Wallhaven"></a>Wallhaven</h2><p>官网: <a href="https://wallhaven.cc/">https://wallhaven.cc/</a><br>类型: 风格比较全<br>质量: 良好</p><h2 id="wallroom"><a href="#wallroom" class="headerlink" title="wallroom"></a>wallroom</h2><p>官网: <a href="https://wallroom.io/">https://wallroom.io/</a><br>类型: 风格比较全<br>质量: 良好</p><h2 id="wallpaperscraft"><a href="#wallpaperscraft" class="headerlink" title="wallpaperscraft"></a>wallpaperscraft</h2><p>官网: <a href="https://wallpaperscraft.com/">https://wallpaperscraft.com/</a><br>类型: 风格多<br>质量: 良好</p><h2 id="Psiupuxa"><a href="#Psiupuxa" class="headerlink" title="Psiupuxa"></a>Psiupuxa</h2><p>官网: <a href="https://psiupuxa.com/">https://psiupuxa.com/</a><br>类型: 宇宙星空<br>质量: 良好</p><h2 id="10WALLPAPER"><a href="#10WALLPAPER" class="headerlink" title="10WALLPAPER"></a>10WALLPAPER</h2><p>官网: <a href="https://10wallpaper.com/">https://10wallpaper.com/</a><br>类型: 风格多<br>质量: 良好</p><h2 id="Wallpapermaiden"><a href="#Wallpapermaiden" class="headerlink" title="Wallpapermaiden"></a>Wallpapermaiden</h2><p>官网: <a href="https://www.wallpapermaiden.com/">https://www.wallpapermaiden.com/</a><br>类型: 主打二次元和动漫风景<br>质量: 良好</p><h2 id="Cgwallpapers"><a href="#Cgwallpapers" class="headerlink" title="Cgwallpapers"></a>Cgwallpapers</h2><p>官网: <a href="https://www.cgwallpapers.com/">https://www.cgwallpapers.com/</a><br>类型: CG,二次元<br>质量: 良好</p><h2 id="堆糖"><a href="#堆糖" class="headerlink" title="堆糖"></a>堆糖</h2><p>官网: <a href="https://www.duitang.com/">https://www.duitang.com</a><br>类型: 壁纸,头像爱好者社区;会分享一些不错的图片<br>质量: 良好</p><h2 id="Wallpaper-Abyss"><a href="#Wallpaper-Abyss" class="headerlink" title="Wallpaper Abyss"></a>Wallpaper Abyss</h2><p>官网: <a href="https://wall.alphacoders.com/?lang=Chinese">https://wall.alphacoders.com/?lang=Chinese</a><br>类型: 风格比较全<br>质量: 一般</p><h2 id="Wallhere"><a href="#Wallhere" class="headerlink" title="Wallhere"></a>Wallhere</h2><p>官网: <a href="https://wallhere.com/">https://wallhere.com/</a><br>类型: 风景<br>质量: 一般</p><h2 id="Alphacoder"><a href="#Alphacoder" class="headerlink" title="Alphacoder"></a>Alphacoder</h2><p>官网: <a href="https://alphacoders.com/">https://alphacoders.com/</a><br>类型: 风格多<br>质量: 一般</p><h2 id="H128壁纸"><a href="#H128壁纸" class="headerlink" title="H128壁纸"></a>H128壁纸</h2><p>官网: <a href="https://www.h128.com/">https://www.h128.com/</a><br>类型: 风格多<br>质量: 一般</p><h1 id="前端素材和UI配色网站"><a href="#前端素材和UI配色网站" class="headerlink" title="前端素材和UI配色网站"></a>前端素材和UI配色网站</h1><h2 id="中国色"><a href="#中国色" class="headerlink" title="中国色"></a>中国色</h2><p>官网: <a href="http://zhongguose.com/">http://zhongguose.com/</a><br>描述: 配色网站，全是中国传统颜色</p><h2 id="配色表"><a href="#配色表" class="headerlink" title="配色表"></a>配色表</h2><p>官网: <a href="http://tool.c7sky.com/webcolor">http://tool.c7sky.com/webcolor</a><br>描述: 配色网站</p><h2 id="Color-Hunt"><a href="#Color-Hunt" class="headerlink" title="Color Hunt"></a>Color Hunt</h2><p>官网: <a href="https://colorhunt.co/">https://colorhunt.co/</a><br>描述: 配色网站</p><h2 id="itmeo"><a href="#itmeo" class="headerlink" title="itmeo"></a>itmeo</h2><p>官网: <a href="https://webgradients.com/">https://webgradients.com/</a><br>描述: 配色网站,对比色特别好</p><h2 id="字客"><a href="#字客" class="headerlink" title="字客"></a>字客</h2><p>官网: <a href="https://www.fontke.com/tool/rgb/ff9966/">https://www.fontke.com/tool/rgb/ff9966/</a><br>描述: 配色网站,rgb配色查询网站</p><h2 id="materialui"><a href="#materialui" class="headerlink" title="materialui"></a>materialui</h2><p>官网: <a href="https://www.materialui.co/colors">https://www.materialui.co/colors</a><br>描述: 配色网站</p><h2 id="日本色"><a href="#日本色" class="headerlink" title="日本色"></a>日本色</h2><p>官网: <a href="http://www.anduril.cn/#kakishibu">http://www.anduril.cn/#kakishibu</a><br>描述: 配色网站,全是日本色</p><h1 id="UI原型设计"><a href="#UI原型设计" class="headerlink" title="UI原型设计"></a>UI原型设计</h1><h2 id="墨刀"><a href="#墨刀" class="headerlink" title="墨刀"></a>墨刀</h2><p>官网: <a href="https://modao.cc/">https://modao.cc/</a><br>描述: 原型,设计,流程图</p><h2 id="jquery样式库"><a href="#jquery样式库" class="headerlink" title="jquery样式库"></a>jquery样式库</h2><p>官网: <a href="https://www.jq22.com/">https://www.jq22.com/</a></p><h2 id="17素材"><a href="#17素材" class="headerlink" title="17素材"></a>17素材</h2><p>官网: <a href="https://www.17sucai.com/">https://www.17sucai.com/</a></p><h1 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h1><h2 id="字魂"><a href="#字魂" class="headerlink" title="字魂"></a>字魂</h2><p>官网: <a href="https://izihun.com/">https://izihun.com/</a><br>描述: 字体很好看，但是收费</p><h2 id="谷歌字体"><a href="#谷歌字体" class="headerlink" title="谷歌字体"></a>谷歌字体</h2><p>官网: <a href="https://fonts.google.com/">https://fonts.google.com/</a><br>描述: 免费字体</p><h2 id="熊猫字体"><a href="#熊猫字体" class="headerlink" title="熊猫字体"></a>熊猫字体</h2><p>官网: <a href="https://www.tukuppt.com/font/">https://www.tukuppt.com/font/</a><br>描述: 同样是很好看的字体网站</p><h2 id="自由字体"><a href="#自由字体" class="headerlink" title="自由字体"></a>自由字体</h2><p>官网: <a href="https://ziyouziti.com/">https://ziyouziti.com/</a><br>描述: 免费字体很多也很好看</p><h2 id="优品字体"><a href="#优品字体" class="headerlink" title="优品字体"></a>优品字体</h2><p>官网: <a href="https://www.ypppt.com/ziti/">https://www.ypppt.com/ziti/</a><br>描述: 字体网站</p><h2 id="站长字体"><a href="#站长字体" class="headerlink" title="站长字体"></a>站长字体</h2><p>官网: <a href="https://font.chinaz.com/">https://font.chinaz.com/</a><br>描述: 免费的字体很多</p><h1 id="图标or表情"><a href="#图标or表情" class="headerlink" title="图标or表情"></a>图标or表情</h1><h2 id="Github表情"><a href="#Github表情" class="headerlink" title="Github表情"></a>Github表情</h2><p>官网: <a href="https://www.webfx.com/tools/emoji-cheat-sheet/">https://www.webfx.com/tools/emoji-cheat-sheet/</a><br>描述: 可以直接写readme里的表情</p><h2 id="阿里巴巴图标库"><a href="#阿里巴巴图标库" class="headerlink" title="阿里巴巴图标库"></a>阿里巴巴图标库</h2><p>官网: <a href="https://www.iconfont.cn/home/index">https://www.iconfont.cn/home/index</a><br>描述: 很好看的一个图标库</p><h2 id="Github图标库"><a href="#Github图标库" class="headerlink" title="Github图标库"></a>Github图标库</h2><p>官网: <a href="https://shields.io/">https://shields.io/</a></p><h1 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h1><h2 id="MAKA"><a href="#MAKA" class="headerlink" title="MAKA"></a>MAKA</h2><p>官网: <a href="https://www.maka.im/muban">https://www.maka.im/muban</a><br>描述: 快速做H5视频的网站</p><h2 id="创客贴"><a href="#创客贴" class="headerlink" title="创客贴"></a>创客贴</h2><p>官网: <a href="https://www.chuangkit.com/designtools/designindex">https://www.chuangkit.com/designtools/designindex</a><br>描述: ppt,海报,名片等</p><h2 id="可画"><a href="#可画" class="headerlink" title="可画"></a>可画</h2><p>官网: <a href="https://www.canva.cn/">https://www.canva.cn/</a><br>描述: 设计网站</p>]]></content>
      
      
      <categories>
          
          <category> 精选 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 收藏 </tag>
            
            <tag> 转载 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决github无法访问的问题</title>
      <link href="/posts/8a834447/"/>
      <url>/posts/8a834447/</url>
      
        <content type="html"><![CDATA[<h2 id="方法一：改host文件"><a href="#方法一：改host文件" class="headerlink" title="方法一：改host文件"></a>方法一：改host文件</h2><ul><li>在 <code>C:\Windows\System32\drivers\etc</code> 中打开host文件（可以用TXT等编辑工具打开），在该文件中添加如下内容。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># GitHub Start</span><br><span class="line">140.82.114.4 github.com</span><br><span class="line">140.82.114.4 gist.github.com</span><br><span class="line">185.199.108.153 assets-cdn.github.com</span><br><span class="line">151.101.64.133 raw.githubusercontent.com</span><br><span class="line">151.101.108.133 gist.githubusercontent.com</span><br><span class="line">151.101.108.133 cloud.githubusercontent.com</span><br><span class="line">151.101.108.133 camo.githubusercontent.com</span><br><span class="line">151.101.108.133 avatars0.githubusercontent.com</span><br><span class="line">151.101.108.133 avatars1.githubusercontent.com</span><br><span class="line">151.101.108.133 avatars2.githubusercontent.com</span><br><span class="line">151.101.108.133 avatars3.githubusercontent.com</span><br><span class="line">151.101.108.133 avatars4.githubusercontent.com</span><br><span class="line">151.101.108.133 avatars5.githubusercontent.com</span><br><span class="line">151.101.108.133 avatars6.githubusercontent.com</span><br><span class="line">151.101.108.133 avatars7.githubusercontent.com</span><br><span class="line">151.101.108.133 avatars8.githubusercontent.com</span><br><span class="line"># GitHub End</span><br></pre></td></tr></table></figure><ul><li>保存文件，重新刷新网页即可打开github了</li></ul><h2 id="方法二：第三方软件"><a href="#方法二：第三方软件" class="headerlink" title="方法二：第三方软件"></a>方法二：第三方软件</h2><ul><li><a href="https://steampp.net/">Watt Toolkit</a> (原名 Steam++)</li><li><a href="https://github.com/docmirror/dev-sidecar">Dev-Sidecar</a></li><li>搭梯子</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>地平线4闪退解决方法汇总</title>
      <link href="/posts/ae739953/"/>
      <url>/posts/ae739953/</url>
      
        <content type="html"><![CDATA[<blockquote><p>原贴：<a href="https://steamcommunity.com/sharedfiles/filedetails/?id=2421269664">https://steamcommunity.com/sharedfiles/filedetails/?id=2421269664</a></p></blockquote><p>极限竞速:地平线4有很多玩家经历着闪退或进不去游戏的情况，这篇指南旨在帮助玩家找到进不去游戏的解决办法。</p><p>闪退或者进不去游戏的原因以及解决办法</p><ol><li><p>首先首当其冲的是系统版本问题：</p><p> 如果你是预览体验计划的用户，dev或者beta版都是不能进入游戏的。</p><p> 其次如果你是 win10企业版LTSC（也就是长期服务版本）你也是不能进入游戏的</p><p> 系统版本如果过低请升级Windows 10 version 15063.0 or higher</p><p> 预览版和企业LTSC的windows打开游戏的时候症状表现为：打开任务管理器的详细信息可以看到进程，但是游戏不会启动（如果是预览体验计划用户，貌似只有详细信息里可以看到）然后这个进程就只在后台启动，并且会持续增加游戏时间。</p><p> 以上两种情况，没什么特别好的办法，只能通过重装20H2版本的windows10 解决。<br> 如果你不是以上的情况还是出现了上面的情况，请往下看，这游戏的闪退原因多种多样，最好还是挨个方法都试一下。</p></li><li><p>缺少系统组件</p><ul><li>如果你是打开游戏后马上闪退：<br> 首先可以先去<a href="https://www.weidown.com/xiazai/733.html">https://www.weidown.com/xiazai/733.html</a><br> 下载一个DirectX修复工具 检测修复DirectX状态 4.0 增强版</li></ul><p> <img src="/assets/img/posts/ForzaHorizon4-Crash-1.png"></p><p> 按照上面的设置，选择修复。</p><ul><li><p>如果你是在健康游戏忠告界面闪退<br> 你要先确定你的电脑用户名是不是中文。在系统设置，账户信息里可以看到（另外强烈建议用微软账户登录系统，后期会少很多麻烦） 如果你是中文用户名，可以考虑把自己的用户名改成中文。具体方法：<a href="https://www.gamersky.com/handbook/202103/1369280.shtml">https://www.gamersky.com/handbook/202103/1369280.shtml</a><br> 但是该用户名会导致有些软件不能使用或者出错，一定要做好重装这些软件的心理准备。</p></li><li><p>如果提示缺少gamingtcui.dll<br> <a href="https://www.duote.com/dll/gamingtcui_dll.html">https://www.duote.com/dll/gamingtcui_dll.html</a><br> 在这下载，然后复制到C:\Windows\System32目录下。</p></li></ul></li><li><p>软件冲突&#x2F;杀毒软件冲突</p><p> 360，微星的Afterburner，罗技GHUB， MacType，bitdefender，或者一些usb接口的耳机都有可能导致游戏闪退，这个原因最复杂，需要一一排查。如果你装了杀毒软件，一定要记得把游戏目录和文件设置为信任。如果你装了上述的一些软件并且闪退了，很遗憾，这些软件和游戏你只能二选其一。这是开发商的锅，没有什么好的办法。最快的检查办法，右键点击windows图标，运行输入msconfig, 切换到服务选项卡，点击隐藏所有Microsoft服务，然后取消选择所有除了steam服务以外的启动项，然后重启电脑，如果游戏可以成功启动了，就可以挨个排查是哪个软件的服务跟游戏冲突了</p><p> <img src="/assets/img/posts/ForzaHorizon4-Crash-2.png"></p></li><li><p>卡登录界面</p><p> 这个其实是最好解决的问题，这基本上是服务器的问题，挂加速器基本上可以解决。但是千万不要用腾讯加速器，那个是反效果。我个人用的是海豚加速器，效果还不错。<br> 如果还不行，建议去下载一个UsbEAm Hosts Editor，点选微软相关的host并保存。<br> 下载地址：<a href="https://www.dogfight360.com/blog/475/">https://www.dogfight360.com/blog/475/</a><br> 另外打开设置—-游戏—-xbox网络可以看到nat类型。这里如果不是显示“开放”就需要相应设置：<br> <a href="https://www.bilibili.com/video/BV1V64y1D79t?t=263">https://www.bilibili.com/video/BV1V64y1D79t?t=263</a></p><p> 如果还是不行，那就挂梯子吧。xbox网络就是这么蛋疼。</p><p> 以上基本上涵盖了大部分的闪退原因和相应的解决办法，如果还有没有解决的玩家可以留言给原贴作者，祝大家游玩愉快！</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Steam </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git忽略提交文件至至git仓库(.gitignore文件)</title>
      <link href="/posts/90218eb9/"/>
      <url>/posts/90218eb9/</url>
      
        <content type="html"><![CDATA[<blockquote><p>See <a href="https://help.github.com/articles/ignoring-files/">https://help.github.com/articles/ignoring-files/</a> for more about ignoring files.</p></blockquote><h2 id="通用"><a href="#通用" class="headerlink" title="通用"></a>通用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">node_modules/</span><br><span class="line">dist/</span><br><span class="line">npm-debug.log*</span><br><span class="line">yarn-debug.log*</span><br><span class="line">yarn-error.log*</span><br><span class="line">**/*.log</span><br><span class="line"></span><br><span class="line"># Editor directories and files</span><br><span class="line">.idea</span><br><span class="line">.vscode</span><br><span class="line">*.suo</span><br><span class="line">*.ntvs*</span><br><span class="line">*.njsproj</span><br><span class="line">*.sln</span><br><span class="line">*.local</span><br><span class="line">*.zip</span><br><span class="line">*.7z</span><br><span class="line"></span><br><span class="line">package-lock.json</span><br><span class="line">yarn.lock</span><br></pre></td></tr></table></figure><h2 id="公共"><a href="#公共" class="headerlink" title="公共"></a>公共</h2><p>Some common .gitignore configurations</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># Compiled source #</span><br><span class="line">###################</span><br><span class="line">*.com</span><br><span class="line">*.class</span><br><span class="line">*.dll</span><br><span class="line">*.exe</span><br><span class="line">*.o</span><br><span class="line">*.so</span><br><span class="line"></span><br><span class="line"># Packages #</span><br><span class="line">############</span><br><span class="line"># it&#x27;s better to unpack these files and commit the raw source</span><br><span class="line"># git has its own built in compression methods</span><br><span class="line">*.7z</span><br><span class="line">*.dmg</span><br><span class="line">*.gz</span><br><span class="line">*.iso</span><br><span class="line">*.jar</span><br><span class="line">*.rar</span><br><span class="line">*.tar</span><br><span class="line">*.zip</span><br><span class="line"></span><br><span class="line"># Logs and databases #</span><br><span class="line">######################</span><br><span class="line">*.log</span><br><span class="line">*.sql</span><br><span class="line">*.sqlite</span><br><span class="line"></span><br><span class="line"># OS generated files #</span><br><span class="line">######################</span><br><span class="line">.DS_Store</span><br><span class="line">.DS_Store?</span><br><span class="line">._*</span><br><span class="line">.Spotlight-V100</span><br><span class="line">.Trashes</span><br><span class="line">ehthumbs.db</span><br><span class="line">Thumbs.db</span><br></pre></td></tr></table></figure><h2 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">dist/</span><br><span class="line">.deploy*/</span><br><span class="line">.vscode</span><br><span class="line">.deploy_git</span><br><span class="line">package-lock.json</span><br><span class="line">yarn.lock</span><br><span class="line">Jenkinsfile</span><br><span class="line">source/_posts/SyncToy*</span><br></pre></td></tr></table></figure><h2 id="uni-app"><a href="#uni-app" class="headerlink" title="uni-app"></a>uni-app</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">node_modules/</span><br><span class="line">dist/**</span><br><span class="line">unpackage/</span><br><span class="line">.DS_Store</span><br><span class="line">.project</span><br><span class="line">.hbuilderx/</span><br><span class="line">.vscode</span><br><span class="line">wxcomponents/**/*.vue</span><br><span class="line">wxcomponents/**/*.css</span><br></pre></td></tr></table></figure><p>附：<a href="https://gitee.com/dcloud/hello-uniapp/blob/master/.gitignore">Dcloud示例项目中的.gitignore</a></p><p>清除unpackage在git中的缓存</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm -r --cached unpackage</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>本站小贴士</title>
      <link href="/posts/52ab6250/"/>
      <url>/posts/52ab6250/</url>
      
        <content type="html"><![CDATA[<h2 id="哈哈哈，欢迎来到我的小破站，不如先看看本站的一些Tips？"><a href="#哈哈哈，欢迎来到我的小破站，不如先看看本站的一些Tips？" class="headerlink" title="哈哈哈，欢迎来到我的小破站，不如先看看本站的一些Tips？"></a>哈哈哈，欢迎来到我的小破站，不如先看看本站的一些Tips？</h2><p>经过我的一番折腾，博客基本定型。<br><del>因为之前是做项目选的一个域名，所以我打算把我的博客换到一个新域名。</del><br><del>部分封面图还没找到合适的，整体进度90%</del><br>目前服务器到期，站点使用的是 Github Page</p><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>本站当前域名：<strong><a href="http://www.jamesy.cn/">www.jamesy.cn</a></strong> 新域名可以使用啦！</p></div>]]></content>
      
      
      
        <tags>
            
            <tag> Site </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP是什么？</title>
      <link href="/posts/48f0923e/"/>
      <url>/posts/48f0923e/</url>
      
        <content type="html"><![CDATA[<blockquote><p>转载自<a href="https://blog.ma-jinyao.cn/posts/8716/" title="HTTP是什么？">ma-jinyao的文章</a></p></blockquote><p>HTTP是客户端和服务端之间互动需要准守的其中一种协议。在日常上网过程中，用户通过浏览器浏览目标网站的操作，看起来就是进入目标网站的门户之后，想看哪里就点哪里，但是实际上客户端和服务端之间的数据互动都是通过一套标准来执行的。用旧时代的眼光来看就是网络节点两边统一使用了莫斯代码，所以两边之间的交流就没有了障碍。</p><span id="more"></span><p><strong>先来个更好的文章做参考：<a href="//www.cnblogs.com/an-wen/p/11180076.html">HTTP协议超级详解</a></strong></p><h1 id="HTTP-x2F-1-1"><a href="#HTTP-x2F-1-1" class="headerlink" title="HTTP&#x2F;1.1"></a>HTTP&#x2F;1.1</h1><p>HTTP属于TCP&#x2F;IP中的“顶层”应用层，这说明HTTP的包装是数据出发前的第一步。在这里不谈TCP相关连接过程，但是HTTP请求&#x2F;响应都是要在连接之后的事；想看的话，可以看<a href="//www.cnblogs.com/kaleidoscope/p/9701117.html">TCP三次握手详解及释放连接过程</a>。基本上HTTP就是请求和响应的模式，在服务方想理你客户方的情况下，你想要什么，她都会回应你。</p><p>HTTP请求方法：</p><ul><li>GET，一般请求的数据都是不需要处理的数据</li><li>HEAD，获取metadata，打个比方就是电脑上文件右键属性</li><li>POST，一般请求的数据都是需要处理的数据</li><li>PUT，像数据库的INSERT</li><li>DELETE，像数据库的DELETE</li><li>PATCH，像数据库的UPDATE</li><li>还有TRACE、OPTIONS、CONNECT</li></ul><p>HTTP状态码：</p><ul><li>100及以上，普通的信息代码</li><li>200及以上，请求成功被处理</li><li>300及以上，请求被重定向了</li><li>400及以上，这是客户方的错</li><li>500及以上，这是服务方的错</li></ul><h2 id="HTTP请求-x2F-响应报文结构"><a href="#HTTP请求-x2F-响应报文结构" class="headerlink" title="HTTP请求&#x2F;响应报文结构"></a>HTTP请求&#x2F;响应报文结构</h2><p><img src="/assets/img/posts/what-is-http-1.png" alt="HTTP请求报文结构"><em>Image from: <a href="//www.cnblogs.com/an-wen/p/11180076.html">HTTP协议超级详解</a></em></p><p><img src="/assets/img/posts/what-is-http-2.jpg" alt="HTTP请求报文例子"><em>Image from: <a href="//www.cnblogs.com/an-wen/p/11180076.html">HTTP协议超级详解</a></em></p><p><img src="/assets/img/posts/what-is-http-3.png" alt="HTTP响应报文结构"><em>Image from: <a href="//www.cnblogs.com/an-wen/p/11180076.html">HTTP协议超级详解</a></em></p><p><img src="/assets/img/posts/what-is-http-4.jpg" alt="HTTP响应报文例子"><em>Image from: <a href="//www.cnblogs.com/an-wen/p/11180076.html">HTTP协议超级详解</a></em></p><h2 id="比较HTTP-x2F-1-1和HTTP-x2F-2"><a href="#比较HTTP-x2F-1-1和HTTP-x2F-2" class="headerlink" title="比较HTTP&#x2F;1.1和HTTP&#x2F;2"></a>比较HTTP&#x2F;1.1和HTTP&#x2F;2</h2><ul><li>HTTP&#x2F;2在一次TCP连接中可以同时发送多个请求，多行程减少了连接次数和响应的等待时间</li><li>HTTP&#x2F;2压缩头部信息，包裹更小，运输更方便</li><li>HTTP&#x2F;2使用二进制协议，不仅节省了不少分隔符和封箱胶带，还可以分成小份包装以数据流形式发送</li><li>HTTP&#x2F;2允许服务端推送，一次请求把相关依赖的脚本也给客户端一起发来，很人性化</li></ul><h1 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h1><p>在HTTP包装外再来个SSL&#x2F;TLS加密包装，HTTPS有以下特点：</p><ol><li>内容加密，传输过程中使用的密文</li><li>验证身份，找到对的服务端</li><li>保护数据完整性，防止传输过程中被动手脚</li></ol><p>基本上传输中的数据不易被动手脚。</p><p><strong><em>更多可以百度HTTP、HTTPS、TCP连接等。</em></strong></p>]]></content>
      
      
      <categories>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 转载 </tag>
            
            <tag> HTTP/HTTPS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微信小程序使用canvas的踩坑记录</title>
      <link href="/posts/22584a84/"/>
      <url>/posts/22584a84/</url>
      
        <content type="html"><![CDATA[<div class="note green icon-padding flat"><i class="note-icon fas fa-pen"></i><p>记录一下微信小程序使用canvas踩的坑</p></div><p>微信小程序生成二维码的插件:</p><ol><li><a href="https://github.com/demi520/wxapp-qrcode" title="wxapp-qrcode">wxapp-qrcode</a></li><li><a href="https://github.com/Pudon/weapp-qrcode-base64" title="weapp-qrcode-base64">weapp-qrcode-base64</a> 基于base64编码输出二维码，不依赖canvas</li></ol><span id="more"></span><h1 id="问题来源"><a href="#问题来源" class="headerlink" title="问题来源"></a>问题来源</h1><p>做一个生成二维码的功能，原来是由前端小程序使用<a href="https://github.com/demi520/wxapp-qrcode" title="wxapp-qrcode">wxapp-qrcode</a>依赖canvas生成二维码。<br>插件使用canvas生成临时路径并渲染到canvas上，但是由于我把临时路径放在了image标签上，把二维码的canvas使用<code>hidden</code>隐藏了，导致在某些机型上出现了问题。</p><h2 id="复现"><a href="#复现" class="headerlink" title="复现"></a>复现</h2><p>手机型号：iPhone XS Max<br>系统：iOS 12.0<br>微信版本：8.0.2<br>基础库版本：2.16.0<br>复现结果：渲染内容短暂显示后消失，真机调试二维码部分出现过极短的闪烁，推测可能是canvas隐藏后闪烁导致的原因<br>复现录屏：</p><p><video src="/assets/media/bug.mp4" controls="controls" height="600px"></video></p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>放弃使用<a href="https://github.com/demi520/wxapp-qrcode" title="wxapp-qrcode">wxapp-qrcode</a>插件，直接由后端生成二维码url地址，用image标签渲染出来。</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>使用canvas渲染时做隐藏某些机型会出现问题，图片尽量使用url地址渲染。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bug </tag>
            
            <tag> 微信小程序 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
